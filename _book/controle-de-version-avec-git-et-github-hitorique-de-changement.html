<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Formation R avancée</title>
  <meta name="description" content="Outils de développement et de performance">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Formation R avancée" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Outils de développement et de performance" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Formation R avancée" />
  
  <meta name="twitter:description" content="Outils de développement et de performance" />
  

<meta name="author" content="Robin Genuer et Boris Hejblum">


<meta name="date" content="2018-04-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="construire-un-package-r.html">
<link rel="next" href="mesurer-et-comparer-des-temps-dexecution.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Formation R avancée : Outils de développement et de performance </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Présentation de la formation</a></li>
<li class="chapter" data-level="1" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html"><i class="fa fa-check"></i><b>1</b> Construire un package <code>R</code></a><ul>
<li class="chapter" data-level="1.1" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#initialiser-un-package"><i class="fa fa-check"></i><b>1.1</b> Initialiser un package</a></li>
<li class="chapter" data-level="1.2" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#ajouter-une-fonction-exemple-fil-rouge"><i class="fa fa-check"></i><b>1.2</b> Ajouter une fonction : exemple fil rouge</a></li>
<li class="chapter" data-level="1.3" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#documenter-une-fonction"><i class="fa fa-check"></i><b>1.3</b> Documenter une fonction</a></li>
<li class="chapter" data-level="1.4" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#tester-le-package-de-maniere-interactive"><i class="fa fa-check"></i><b>1.4</b> Tester le package de manière <em>intéractive</em></a></li>
<li class="chapter" data-level="1.5" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#tester-le-package-de-maniere-automatique"><i class="fa fa-check"></i><b>1.5</b> Tester le package de manière <em>automatique</em></a></li>
<li class="chapter" data-level="1.6" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#faire-un-check-du-package"><i class="fa fa-check"></i><b>1.6</b> Faire un <em>check</em> du package</a></li>
<li class="chapter" data-level="1.7" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#installer-le-package"><i class="fa fa-check"></i><b>1.7</b> Installer le package</a></li>
<li class="chapter" data-level="1.8" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#annexe-1.1-ajouter-dune-methode-s3"><i class="fa fa-check"></i><b>1.8</b> Annexe 1.1 : ajouter d’une méthode S3</a></li>
<li class="chapter" data-level="1.9" data-path="construire-un-package-r.html"><a href="construire-un-package-r.html#annexe-1.2-soumettre-son-package-au-cran"><i class="fa fa-check"></i><b>1.9</b> Annexe 1.2 : soumettre son package au CRAN</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><i class="fa fa-check"></i><b>2</b> Contrôle de version avec <code>git</code> et GitHub : hitorique de changement,</a><ul>
<li class="chapter" data-level="2.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#principe-du-controle-de-version"><i class="fa fa-check"></i><b>2.1</b> Principe du contrôle de version</a><ul>
<li class="chapter" data-level="2.1.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#git"><i class="fa fa-check"></i><b>2.1.1</b> <code>git</code></a></li>
<li class="chapter" data-level="2.1.2" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#subversion"><i class="fa fa-check"></i><b>2.1.2</b> <code>subversion</code></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#utiliser-git-localement-depuis-rstudio"><i class="fa fa-check"></i><b>2.2</b> Utiliser <code>git</code> localement depuis RStudio</a><ul>
<li class="chapter" data-level="2.2.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#bonnes-pratiques-du-commit"><i class="fa fa-check"></i><b>2.2.1</b> Bonnes pratiques du <em>commit</em></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#github"><i class="fa fa-check"></i><b>2.3</b> GitHub</a><ul>
<li class="chapter" data-level="2.3.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#mettre-son-package-r-sur-github"><i class="fa fa-check"></i><b>2.3.1</b> Mettre son package <code>R</code> sur GitHub</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#collaboration-pour-la-production-du-code"><i class="fa fa-check"></i><b>2.4</b> Collaboration pour la production du code</a><ul>
<li class="chapter" data-level="2.4.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#branches"><i class="fa fa-check"></i><b>2.4.1</b> <em>Branches</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#merge"><i class="fa fa-check"></i><b>2.4.2</b> <em>Merge</em></a></li>
<li class="chapter" data-level="2.4.3" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#les-conflits"><i class="fa fa-check"></i><b>2.4.3</b> Les conflits</a></li>
<li class="chapter" data-level="2.4.4" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#fork"><i class="fa fa-check"></i><b>2.4.4</b> <em>Fork</em></a></li>
<li class="chapter" data-level="2.4.5" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#pull-request"><i class="fa fa-check"></i><b>2.4.5</b> <em>Pull request</em></a></li>
<li class="chapter" data-level="2.4.6" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#issues"><i class="fa fa-check"></i><b>2.4.6</b> <em>Issues</em></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#integration-continue"><i class="fa fa-check"></i><b>2.5</b> Intégration continue</a><ul>
<li class="chapter" data-level="2.5.1" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#travis-ci"><i class="fa fa-check"></i><b>2.5.1</b> Travis CI</a></li>
<li class="chapter" data-level="2.5.2" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#appveyor"><i class="fa fa-check"></i><b>2.5.2</b> Appveyor</a></li>
<li class="chapter" data-level="2.5.3" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#r-hub"><i class="fa fa-check"></i><b>2.5.3</b> R-hub</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="controle-de-version-avec-git-et-github-hitorique-de-changement.html"><a href="controle-de-version-avec-git-et-github-hitorique-de-changement.html#annexe-2.1-couverture-du-code"><i class="fa fa-check"></i><b>2.6</b> Annexe 2.1 : couverture du code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mesurer-et-comparer-des-temps-dexecution.html"><a href="mesurer-et-comparer-des-temps-dexecution.html"><i class="fa fa-check"></i><b>3</b> Mesurer et comparer des temps d’exécution</a><ul>
<li class="chapter" data-level="3.1" data-path="mesurer-et-comparer-des-temps-dexecution.html"><a href="mesurer-et-comparer-des-temps-dexecution.html#mesurer-des-temps-dexecution-avec-system.time"><i class="fa fa-check"></i><b>3.1</b> Mesurer des temps d’exécution avec <code>system.time()</code></a></li>
<li class="chapter" data-level="3.2" data-path="mesurer-et-comparer-des-temps-dexecution.html"><a href="mesurer-et-comparer-des-temps-dexecution.html#comparer-des-temps-dexecution-avec-microbenchmark"><i class="fa fa-check"></i><b>3.2</b> Comparer des temps d’exécution avec <code>microbenchmark()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="profiler-son-code.html"><a href="profiler-son-code.html"><i class="fa fa-check"></i><b>4</b> <em>Profiler</em> son code</a><ul>
<li class="chapter" data-level="4.1" data-path="profiler-son-code.html"><a href="profiler-son-code.html#comparaison-avec-une-version-plus-habile-de-mnvpdf"><i class="fa fa-check"></i><b>4.1</b> Comparaison avec une version plus habile de <code>mnvpdf()</code></a></li>
<li class="chapter" data-level="4.2" data-path="profiler-son-code.html"><a href="profiler-son-code.html#comparaison-avec-une-version-optimisee-dans-r"><i class="fa fa-check"></i><b>4.2</b> Comparaison avec une version optimisée dans R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html"><a href="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html"><i class="fa fa-check"></i><b>5</b> <code>Rcpp</code> ou comment intégrer facilement du code <code>C++</code>dans un package <code>R</code></a><ul>
<li class="chapter" data-level="5.1" data-path="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html"><a href="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html#premiere-fonction-en-rcpp"><i class="fa fa-check"></i><b>5.1</b> Première fonction en Rcpp</a></li>
<li class="chapter" data-level="5.2" data-path="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html"><a href="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html#optimisation-grace-a-c"><i class="fa fa-check"></i><b>5.2</b> Optimisation grâce à <code>C++</code></a></li>
<li class="chapter" data-level="5.3" data-path="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html"><a href="rcpp-ou-comment-integrer-facilement-du-code-cdans-un-package-r.html#annexe-6.1-loptimisation-prematuree-nest-pas-une-bonne-idee"><i class="fa fa-check"></i><b>5.3</b> Annexe 6.1 : l’optimisation prématurée n’est pas une bonne idée</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html"><i class="fa fa-check"></i><b>6</b> Parallélisation du code <code>R</code></a><ul>
<li class="chapter" data-level="6.1" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html#introduction-a-lexecution-parallele-sous-r"><i class="fa fa-check"></i><b>6.1</b> Introduction à l’execution parallèle sous <code>R</code></a></li>
<li class="chapter" data-level="6.2" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html#premiere-fonction-parallele-en-r"><i class="fa fa-check"></i><b>6.2</b> Première fonction parallèle en <code>R</code></a></li>
<li class="chapter" data-level="6.3" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html#parallelisation-efficace"><i class="fa fa-check"></i><b>6.3</b> Parallélisation efficace</a></li>
<li class="chapter" data-level="6.4" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html#parallelisation-dans-notre-exemple-fil-rouge"><i class="fa fa-check"></i><b>6.4</b> Parallélisation dans notre exemple fil rouge</a></li>
<li class="chapter" data-level="6.5" data-path="parallelisation-du-code-r.html"><a href="parallelisation-du-code-r.html#conclusion"><i class="fa fa-check"></i><b>6.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="miscelanees.html"><a href="miscelanees.html"><i class="fa fa-check"></i><b>7</b> Miscélanées</a><ul>
<li class="chapter" data-level="7.1" data-path="miscelanees.html"><a href="miscelanees.html#debugging-avec-browser"><i class="fa fa-check"></i><b>7.1</b> Debugging avec <code>browser()</code></a></li>
<li class="chapter" data-level="7.2" data-path="miscelanees.html"><a href="miscelanees.html#attach"><i class="fa fa-check"></i><b>7.2</b> <code>attach</code></a></li>
<li class="chapter" data-level="7.3" data-path="miscelanees.html"><a href="miscelanees.html#gestion-memoire"><i class="fa fa-check"></i><b>7.3</b> gestion mémoire</a></li>
<li class="chapter" data-level="7.4" data-path="miscelanees.html"><a href="miscelanees.html#copies-et-variables-localesglobales-dans-les-fonctions"><i class="fa fa-check"></i><b>7.4</b> copies et variables locales/globales dans les fonctions</a></li>
<li class="chapter" data-level="7.5" data-path="miscelanees.html"><a href="miscelanees.html#naming"><i class="fa fa-check"></i><b>7.5</b> naming</a></li>
<li class="chapter" data-level="7.6" data-path="miscelanees.html"><a href="miscelanees.html#gpplot2"><i class="fa fa-check"></i><b>7.6</b> <code>gpplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="take-home-message.html"><a href="take-home-message.html"><i class="fa fa-check"></i><b>8</b> <em>Take Home message</em></a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>Références</a></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Formation R avancée</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="controle-de-version-avec-git-et-github-hitorique-de-changement" class="section level1">
<h1><span class="header-section-number">2</span> Contrôle de version avec <code>git</code> et GitHub : hitorique de changement,</h1>
<p>développement collaboratif et intégration continue.</p>
<p>Nous nous intéressons ici aux solutions proposées par RStudio et GitHub pour l’hébergement et le contrôle de version de projets.</p>
<div id="principe-du-controle-de-version" class="section level2">
<h2><span class="header-section-number">2.1</span> Principe du contrôle de version</h2>
<p>Le principe du contrôle de version est d’enregistrer les changements successifs apportés à des fichiers (notamment des fichiers R).</p>
<p>RStudio propose 2 solutions intégrées pour le contrôle de version :</p>
<ul>
<li><p><code>git</code></p></li>
<li><p><code>svn</code></p></li>
</ul>
<div id="git" class="section level3">
<h3><span class="header-section-number">2.1.1</span> <code>git</code></h3>
<p><code>git</code> est un logiciel de contrôle de version (c’est-à-dire un outils qui va enregistrer l’histoire des changements successifs de votre code et permettre de partager ces changements avec d’autres personnes). <code>git</code> est un logiciel en ligne de commande, et sa prise en main n’est pas nécessairement intuitive.</p>
<p><code>git</code> fonctionne de la façon suivante : sur un serveur dans le ‘cloud’, une version <strong>à jour</strong> du code est disponible. À tout moment il est possible d’accéder à cette version du code en ligne. Chaque contributeur peut télécharger cette dernière version <strong>à jour</strong> (dans une action que l’on dénomme <em>pull</em>), avant de l’éditer localement. Une fois ses changements effectués, le contributeur peut alors mettre à jour la version en ligne du code afin que ses changements soient disponibles pour tout le monde (dans une action que l’on dénomme <em>push</em>)</p>
<p><strong>NB</strong> : <code>git</code> a été pensé pour des fichiers légers (comme par exemple des fichiers texte) et est loin d’être optimisé pour des fichiers trop lourds et/où compressés.</p>
</div>
<div id="subversion" class="section level3">
<h3><span class="header-section-number">2.1.2</span> <code>subversion</code></h3>
<p><code>subversion</code> est l’autre solution disponible dans RStudio. Elle fonctionne de manière similaire à git, mais avec des fonctionnalités un peu plus réduites que nous détaillons pas ici (la différence majeure est que tout les contributeurs travaillent simultanément sur la même version du code).</p>
</div>
</div>
<div id="utiliser-git-localement-depuis-rstudio" class="section level2">
<h2><span class="header-section-number">2.2</span> Utiliser <code>git</code> localement depuis RStudio</h2>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Commencez par activer <code>git</code> depuis l’onglet “Git/SVN” de “Project Options” situé dans le menu “Tools” et suivre les instructions.</p></li>
<li><p>À partir de l’onglet “Git” maintenant apparu à côté de l’onglet “Build”, enregistrer l’état actuel de votre package en réalisant votre premier “commit”</p></li>
<li><p>à partir de l’onglet “Git” maintenant apparu à côté de l’onglet “Build”, enregistrer l’état actuel de votre package en réalisant votre premier “commit” :</p></li>
</ol>
<ul>
<li><p>3a. sélectionner les fichiers à suivre (ne pas sélectionner le fichier .Rpoj)</p></li>
<li><p>3b. écrire un message informatif (pour vos collaborateurs - ce qui inclut votre futur vous)</p></li>
<li><p>3c. cliquer sur “Commit”</p></li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><p>ajouter une ligne “*.Rproj&quot; au fichier “.gitignore” et effectuez un nouveau commit</p></li>
<li><p>visualiser les changements et leur historique à l’aide des outils de visualisation “Diff” et “History” accessible depuis l’onglet “Git”</p></li>
</ol>
</blockquote>
<div id="bonnes-pratiques-du-commit" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Bonnes pratiques du <em>commit</em></h3>
<p>Idéalement, chaque commit ne devrait régler qu’un seul problème. Il devrait le régler dans son intégralité (être <strong>complet</strong>) et ne contenir des changements relatifs qu’uniquement à ce problème (être <strong>minimal</strong>). Il est alors important d’écrire des message de commit <strong>informatifs</strong> (pensez à vos collaborateur, qui incluent votre <strong>futur vous</strong>). Il faut également être concis, et décrire les raisons des changements plutôt que les changements eux-mêmes (visibles dans le <em>Diff</em>). Il est parfois difficile de respecter ces directives à la lettre, et celles-ci ne sont qu’un guide et ne doivent pas vous empêcher d’effectuer des <em>commits</em> réguliers.</p>
<p>Par ailleurs, la tentation d’avoir un historique de changements “propre” et bien ordonné est naturelle, mais se révèle une source de problèmes inutiles. Elle entre en contradiction avec l’objectif de traçabilité du contrôle de version. Le développement de code étant généralement un processus intellectuel complexe et non linéaire, il est normal que l’enregistrement des changements reflète ce cheminement. En pratique, votre futur-vous sera le premier utilisateur de votre historique de changements et la priorité est donc de vous faciliter la tache dans le futur lors de la résolution de bug où l’extension de fonctionnalités.</p>
</div>
</div>
<div id="github" class="section level2">
<h2><span class="header-section-number">2.3</span> GitHub</h2>
<p><a href="https://github.com/">GitHub</a> est un site internet proposant une solution d’hébergement de code en ligne, et s’appuyant sur <code>git</code>. Il existe de nombreux sites web et services (gitlab, bitbucket, …) permettant d’héberger du code et s’appuyant sur <code>git</code>. GitHub est très populaire dans la communauté des développeurs <code>R</code>, et est relativement facile à utiliser, même pour un utilisateur novice.</p>
<p>Les avantages d’utiliser GitHub :</p>
<ul>
<li><p>une interface graphique simple pour suivre l’historique des changements de votre code</p></li>
<li><p>la dernière version de développement de votre code est disponible en ligne et vous pouvez la référencer (on peut même référencer un numéro de commit précis pour geler une version spécifique du code)</p></li>
<li><p>les utilisateurs disposent d’un canal clair et transparent pour signaler les bugs/difficultés</p></li>
<li><p>cela facilite grandement le développement collaboratif</p></li>
</ul>
<div id="mettre-son-package-r-sur-github" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Mettre son package <code>R</code> sur GitHub</h3>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>rendez vous sur le site <a href="https://github.com/" class="uri">https://github.com/</a> et créez vous un compte GitHub (si vous hésitez, une convention courante est d’utiliser <em>prénomnom</em> comme nom d’utilisateur)</p></li>
<li><p>ouvrez le client “GitHub desktop” sur votre machine et connectez vous à votre compte GitHub.</p></li>
<li><p>ajouter un nouveau projet local en cliquant sur l’icone “+” en haut à gauche de la fenêtre du client, puis en choississant “Add” et en rentrant le chemin du dossier où se trouve le code de votre package.</p></li>
<li><p>une fois le repertoire créer en local, publiez le sur GitHub en cliquant sur “Publish” en haut à droite de la fenêtre du client. Vérifiez sur le site de GitHub que votre code à bien été <em>uploadé</em> avec les 2 commits précédents.</p></li>
<li><p>Ajouter un fichier “README.Rmd” à votre package afin de disposer d’une belle page d’accueil sur GitHub :</p></li>
</ol>
<ul>
<li><p>5a. dans RStudio, executez la commande <code>devtools::use_readme_rmd()</code></p></li>
<li><p>5b. à l’aide de l’outilds “Diff” de l’onglet “Git” de RStudio, étudier les changements opérer par la commande précédente</p></li>
<li><p>5c. éditez le fichier “README.Rmd” créé, puis créer le fichier README.md correspondant en executant <code>knitr</code> (cliquer su la pelotte de laine “Knit” en haut à gauche dans Rstudio), avant d’effectuer un 3<sup>e</sup> commit contenant ces changements</p></li>
<li><p>5d. à ce stade, si vous visitez la page de votre répertoire sur GitHub, votre 3<sup>e</sup> commit n’apparait pour l’instant pas. Il faut synchroniser le répertoire GitHub en ligne avec votre dossier local. Pour cela, vous avez 2 solutions : soit utiliser le bouton “Sync” en haut à droit de la fenêtre du client GitHub desktop ; soit directement depuis RStudio en cliquant sur “Push” depuis l’onglet “Git”. Maintenant, les changement du 3<sup>e</sup> commit sont visibles en ligne dur GitHub.</p></li>
</ul>
</blockquote>
</div>
</div>
<div id="collaboration-pour-la-production-du-code" class="section level2">
<h2><span class="header-section-number">2.4</span> Collaboration pour la production du code</h2>
<p><code>git</code> et GitHub sont particulièrement efficaces lorsque plusieurs personnes collabore pour développer un code. En effet, chacun peut effectuer des <em>pull</em> et <em>push</em> successifs pour apporter des changements au code, de manière simultanée et en étant sûr de toujours travailler sur la dernière version. Nous allons voir différents concepts utiles dans le cas d’un tel travail collaboratif.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>En formant des groupes de 2, vous allez chacun ajouter votre binome comme “collaborator” à votre repertoire GitHub à partir de l’onglet “Settings” (sur GitHub).</p></li>
<li><p>Quelques instants plus tard le collaborateur ainsi ajouté reçoit un email l’invitant à accepter l’ajout. Cliquer sur le lien et accepter.</p></li>
<li><p>Dans le client “GitHub desktop”, ajouter le répertoire de votre binôme en cliquant sur l’icone “+” en haut à gauche et en selectionnant “Clone”, ce qui fait apparaitre la liste des repertoires associés à votre compte GitHub non liés à un dossier local. Sélectionner le projet de votre binome.</p></li>
</ol>
</blockquote>
<div id="branches" class="section level3">
<h3><span class="header-section-number">2.4.1</span> <em>Branches</em></h3>
<p>Une des fonctionnalités assez utile de git est les <em>branches</em>. Cela permet d’opérer des changements importants dans le code sans perturber le fonctionnement actuel. C’est notamment utile pour explorer une piste de développement dont on ne sait pas si elle sera concluante au final.</p>
<p>D’ailleurs, vous utilisez déjà les branches depuis le depuis de cette partie. En effet, la branche par défaut est appelé “master”.</p>
<p>Grâce à ce système de branches, on obtient un arbre des différents <em>commits</em> au cours du temps (où les nœuds correspondent à la séparations des branches).</p>
</div>
<div id="merge" class="section level3">
<h3><span class="header-section-number">2.4.2</span> <em>Merge</em></h3>
<p>Un <em>pull</em> se décompose en 2 actions de la part de <code>git</code> :</p>
<ol style="list-style-type: decimal">
<li><p>tout d’abord un <em>fetch</em>, qui correspond au téléchargement du code en ligne</p></li>
<li><p>suivi d’un <em>merge</em> qui fusionne la version locale avec les changements.</p></li>
</ol>
<p>Après avoir conduit un développement expérimental dans une branche, on peut vouloir <em>merger</em> ces changements dans la branche “master” par exemple, après que l’expérience se soit révélée concluante.&quot;</p>
<p>Si un les changements concernent des parties distinctes du code, alors le <em>merge</em> peut s’effectuer sans problème. En revanche si les 2 versions à <em>merger</em> comportent des changements depuis leur dernier “commit* commun qui concerne les mêmes lignes de codes, alors on va rencontrer un (ou des ) conflit(s), qu’il va falloir résoudre.</p>
</div>
<div id="les-conflits" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Les conflits</h3>
<p>Prenons l’exemple suivant : le développeur <span class="math inline">\(D_1\)</span> et le développeur <span class="math inline">\(D_2\)</span> on tous les 2 <em>pullé</em> la version v0.1 du code à l’instant <span class="math inline">\(t\)</span> sur leur machine respective. Ils travaillent chacun indépendamment pour apporter des changements au code. Au moment de <em>pusher</em> ses changements, le développeur <span class="math inline">\(D_2\)</span> reçoit un message d’erreur :</p>
<p>“Sync Error.<br />
Please resolve all conflicted files, commit, then try syncing again.”</p>
<p>Chaque fichier étant source de conflit a alors été automatiquement édité comme suit :</p>
<pre class="git"><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
code dans votre version local
=======
code en ligne
&gt;&gt;&gt;&gt;&gt;&gt;&gt; remote</code></pre>
<p>Pour résoudre le conflit, il faut alors éditer chaque fichier un à un en choisissant s’il faut conserver la version locale ou bien celle en ligne, avant de pouvoir <em>commiter</em> à nouveau et enfin de <em>pusher</em> vos changements avec succès.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Modifiez le fichier <code>README.Rmd</code> de votre binome, puis <em>commitez</em> votre changement et <em>pushez</em> le.</p></li>
<li><p>une fois que votre binôme a modifié votre <code>README.Rmd</code>, modifiez à votre tour le fichier à la même ligne, <strong>SANS</strong> <em>puller</em> les changements de votre binôme au préalable ! <em>Commitez</em> et essayez de <em>pusher</em> ces changements.</p></li>
<li><p>Résolvez le conflit.</p></li>
</ol>
</blockquote>
</div>
<div id="fork" class="section level3">
<h3><span class="header-section-number">2.4.4</span> <em>Fork</em></h3>
<p>L’action <em>fork</em> permet de créer une copie qui vous appartient à partir d’un code disponible. Ainsi le code original ne sera pas impacté par vos changements. Cela revient à créer une branche, et la séparer de l’arbre pour pouvoir en assumer la propriété.</p>
<p>Cette action est principalement utile dans le cadre des <em>pull requests</em>.</p>
</div>
<div id="pull-request" class="section level3">
<h3><span class="header-section-number">2.4.5</span> <em>Pull request</em></h3>
<p>Il s’agit du moyen le plus facile de proposer des changements dans un code dont vous n’êtes pas collaborateur. GitHub propose une interface graphique facilitant leur traitement.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Modifiez le <code>README.Rmd</code> de votre voisin qui n’est pas votre binôme après avoir <em>forké</em> son package.</p></li>
<li><p>Proposez votre changement sous la forme d’une <em>pull request</em>.</p></li>
<li><p>Acceptez la <em>pull request</em> sur le site de GitHub et faire le <em>merge</em>.</p></li>
</ol>
</blockquote>
</div>
<div id="issues" class="section level3">
<h3><span class="header-section-number">2.4.6</span> <em>Issues</em></h3>
<p>Pour n’importe quel répertoire GitHub, vous pouvez poster un commentaire sous forme d’<em>issue</em> afin d’alerter les développeurs sur un éventuel bug, ou une question sur l’utilisation du package, ou encore demander une fonctionnalité supplémentaire…</p>
<p>L’idéal est de proposer vous-même une <em>pull request</em> qui résout votre <em>issue</em> lorsque vous le pouvez (i.e. en avez les capacités et le temps).</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Utilisez <code>devtools::use_github_links()</code> afin d’ajouter les 2 lignes suivantes au fichier <code>DESCRIPTION</code> de votre package<br />
<code>URL: http://github.com/*prenom.nom*/mypkg</code><br />
<code>BugReports: http://github.com/*prenom.nom*/mypkg/issues</code><br />
grâce à la fonction <code>devtools::use_github_links()</code></p></li>
<li><p>Visualisez les nouveau changements, puis <em>commitez</em> les.</p></li>
<li><p>Créez une <em>issue</em> sur le projet de votre binome</p></li>
</ol>
</blockquote>
</div>
</div>
<div id="integration-continue" class="section level2">
<h2><span class="header-section-number">2.5</span> Intégration continue</h2>
<p>À chaque changement, à chaque <em>commit</em> donc, il y a la possibilité d’introduire 1 (ou plusieurs) bugs qui vont empêcher le package de passer le <em>CRAN check</em>. Si l’on accumule trop de ces bugs, au moment de soumettre la nouvelle version, il peut y avoir beaucoup de corrections à apporter. C’est d’autant plus frustrant si le package passait le <em>CRAN check</em> auparavant…</p>
<p>Les services d’intégration continue permettent de <em>checker</em> votre package <strong>automatiquement</strong> après chaque <em>commit</em> ! En cas d’échec, vous recevez un mail qui vous en informe. Un certain nombre de ces services proposent une offre limitée gratuite pour les projets open-source.</p>
<p>Une autre raison d’utiliser l’intégration continue est qu’elle permet de tester votre package sur des infrastructures différentes de la votre (e.g. Windows, Ubuntu, Mac OS) et pour différentes versions de <code>R</code> (<em>current</em>, <em>devel</em>…)</p>
<div id="travis-ci" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Travis CI</h3>
<p>Travis est un service d’intégration continue (<em>Continuous Integration</em>), qui permet de <em>checker</em> votre package à chaque <em>commit</em> sous Ubuntu. La commande <code>devtools::use_travis()</code> initialise le fichier de configuration <code>.travis.yml</code> nécessaire.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Rendez vous sur le site <a href="https://travis-ci.org/" class="uri">https://travis-ci.org/</a> et créez vous un compte associé à votre GitHub en cliquant sur le bouton “SignIn with GitHub” en haut à droite.</p></li>
<li><p>Activez votre repertoire <code>mypkg</code> sur Travis</p></li>
<li><p>executez la commande <code>devtools::use_travis()</code> et <em>commitez</em> les changements et regardez ce qu’il se passe sur votre page Travis</p></li>
<li><p>ajouter un joli badge à votre README.md grâce au code suivant (obtenu dans la console R) :<br />
<code>[![Travis-CI Build Status](https://travis-ci.org/*prenomnom*/mypkgr.svg?branch=master)](https://travis-ci.org/*prenomnom*/mypkgr)</code><br />
et <em>commitez les changements</em></p></li>
</ol>
</blockquote>
<p>Travis permet également de tester votre package sous Mac OS (même si ce service est parfois moins stable).</p>
<blockquote>
<ol start="5" style="list-style-type: decimal">
<li>Ajoutez les lignes suivantes dans le fichier de configuration <code>.travis.yml</code> :</li>
</ol>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">r<span class="op">:</span><span class="st"> </span>
<span class="st"> </span><span class="op">-</span><span class="st"> </span>release
 <span class="op">-</span><span class="st"> </span>devel
os<span class="op">:</span>
<span class="st"> </span><span class="op">-</span><span class="st"> </span>linux
 <span class="op">-</span><span class="st"> </span>osx</code></pre></div>
<p>N’hésitez pas à aller visiter les pages de packages connus sur GitHub pour observer comment ils configurent leur fichier <code>.travis.yml</code>.</p>
</div>
<div id="appveyor" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Appveyor</h3>
<p>Appveyor est l’analogue de Travis CI mais pour Windows.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>Rendez vous sur le site <a href="https://ci.appveyor.com/" class="uri">https://ci.appveyor.com/</a> et créez vous un compte associé à votre GitHub en cliquant sur le bouton “GitHub” pour le <em>Login</em></p></li>
<li><p>Ajoutez votre repertoire <code>mypkg</code> sur Appveyor en cliquant sur “+ New project” en haut à gauche, puis en selectionnant GitHub et mypkg dans le menu.</p></li>
<li><p>Executez la commande <code>devtools::use_appveyor()</code> et <em>commitez</em> les changements et regardez ce qu’il se passe sur votre page Appveyor</p></li>
<li><p>ajouter un joli badge à votre README.md grâce au code suivant (obtenu dans la console R) :<br />
<code>[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/*prenomnom*/mypkgr?branch=master&amp;svg=true)](https://ci.appveyor.com/project/*prenomnom*/mypkgr)</code> et <em>commitez les changements</em></p></li>
</ol>
</blockquote>
</div>
<div id="r-hub" class="section level3">
<h3><span class="header-section-number">2.5.3</span> R-hub</h3>
<p>Le <em>R consortium</em> met à disposition le <a href="https://www.r-consortium.org/blog/2016/06/06/first-public-version-of-the-r-hub-builder">R-hub builder</a>, et a pour ambition de bientôt proposer un service d’intégration continue spécialement dédié aux packages <code>R</code>.</p>
</div>
</div>
<div id="annexe-2.1-couverture-du-code" class="section level2">
<h2><span class="header-section-number">2.6</span> Annexe 2.1 : couverture du code</h2>
<p>Le package <code>covr</code> propose une solution pour mesurer la couverture des tests unitaires associés à un package. La couverture de test détermine la proportion du code source qui est effectivement utilisée lors de l’exécution des tests unitaires. La mesure de la couverture du code renforce la fiabilité d’un code et donne confiance à ses utilisateurs potentiels.</p>
<blockquote>
<p><strong><em>A vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li>Executez la commande <code>devtools::use_appveyor()</code>, ajouter un joli badge à votre README.md grâce au code suivant (obtenu dans la console R) :<br />
<code>[![Coverage Status](https://img.shields.io/codecov/c/github/*prenomnom*/mypkgr/master.svg)](https://codecov.io/github/*prenomnom*/mypkgr?branch=master)</code><br />
Et ajouter au fichier <code>.travis.yml</code>:</li>
</ol>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">after_success<span class="op">:</span>
<span class="st">  </span><span class="op">-</span><span class="st"> </span>Rscript <span class="op">-</span>e <span class="st">&#39;covr::codecov()&#39;</span></code></pre></div>
<blockquote>
<ol start="2" style="list-style-type: decimal">
<li><em>Commitez</em> ces changements.</li>
</ol>
</blockquote>
<p>Pour plus d’information n’hésitez pas à consulter la <a href="https://cran.r-project.org/web/packages/covr/vignettes/how_it_works.html">vignette</a> de <code>covr</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="construire-un-package-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mesurer-et-comparer-des-temps-dexecution.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sistm/OutilsDvpmtPerf/edit/master/03-GitHub_versionControl.Rmd",
"text": "Edit"
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
