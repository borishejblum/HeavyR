[{"path":"index.html","id":"course-syllabus","chapter":"Course syllabus","heading":"Course syllabus","text":"main goal course give tools ease (high-performing effcient) code development . performance side come second part, initial tools introduced also useful situations require\nimportant computation times.focus presentation development tools focuusing notion package. already familiar notion, already\nalready installed packages CRAN example ! also know standard way  distribuute code make available.\nshow package also excellent tool developing code.follow outline :Build packageBuild packageTracking changes, sharing code, collaborative development automating tests packageTracking changes, sharing code, collaborative development automating tests packageMeasure computation timeMeasure computation timeProfile codeProfile codeUse Rcpp optimize needs optimizedUse Rcpp optimize needs optimizedParallelize code easilyParallelize code easilyTo take course, need following softwares installed:latest version  (https://cloud.r-project.org/)latest version  (https://cloud.r-project.org/)latest version RStudio (https://www.rstudio.com/products/rstudio/download/#download)latest version RStudio (https://www.rstudio.com/products/rstudio/download/#download)C++ compiler (gcc clang - native UNIX systems,\nWindows users recommend installing\nRtools, \nMac users may necessary install macOS tool chain (namely Xcode Command Line Tools gfortran) used  detailed )C++ compiler (gcc clang - native UNIX systems,\nWindows users recommend installing\nRtools, \nMac users may necessary install macOS tool chain (namely Xcode Command Line Tools gfortran) used  detailed )following  packages: devtools, future.apply, itertools, microbenchmark, mvtnorm, profvis, Rcpp, RcppArmadillo, roxygen2, testthat, usethisthe following  packages: devtools, future.apply, itertools, microbenchmark, mvtnorm, profvis, Rcpp, RcppArmadillo, roxygen2, testthat, usethisthe software gitthe software git","code":""},{"path":"building-a-package.html","id":"building-a-package","chapter":"1 Building a  package","heading":"1 Building a  package","text":"present efficiently create build package using Rstudio IDE, devtools usethis packages.details provided reference material subject: book R packages Hadley Wickham, freely available online.","code":""},{"path":"building-a-package.html","id":"initializing-a-package","chapter":"1 Building a  package","heading":"1.1 Initializing a package","text":"simple way, built Rstudio, initialize package :create new project (top left File drop menu Rstudio)create new project (top left File drop menu Rstudio)choose ‚ÄúNew Directory‚Äùchoose ‚ÄúNew Directory‚Äùchoose ‚ÄúR package using devtools‚Äù (available, choose ‚ÄúR\npackage‚Äù, difference ‚ÄúR package‚Äù delete unnecessary files automatically created useful)choose ‚ÄúR package using devtools‚Äù (available, choose ‚ÄúR\npackage‚Äù, difference ‚ÄúR package‚Äù delete unnecessary files automatically created useful)give name package, example mypkgr.give name package, example mypkgr., get minimal structure  package, namely:DESCRIPTION file whose Title, Version, Authors@R \nDescription edited (parts can edited even added automatically, see\neven added automatically, see )DESCRIPTION file whose Title, Version, Authors@R \nDescription edited (parts can edited even added automatically, see\neven added automatically, see )NAMESPACE file later edited automatically\n(hands now)NAMESPACE file later edited automatically\n(hands now)folder R add .R script filesa folder R add .R script filesdevtools also adds three optional files:.gitignore, relative git, version control tool see detail\nsection GitHub.gitignore, relative git, version control tool see detail\nsection GitHubmypkgr.Rproj specific file Rstudio, allows define\ncharacteristics preferences project just createdmypkgr.Rproj specific file Rstudio, allows define\ncharacteristics preferences project just created.Rbuildignore allows ignore files build package road (example, mypkgr.Rproj file included package).Rbuildignore allows ignore files build package road (example, mypkgr.Rproj file included package)","code":""},{"path":"building-a-package.html","id":"adding-a-function-common-theme-example","chapter":"1 Building a  package","heading":"1.2 Adding a function: common theme example","text":"first invite code following function, use throughout course:want compute value density multivariate normal distribution\n\\(\\mathbb{R}^p\\) \\(n\\) points. function must applicable \nmultivariate normal distribution (.e.¬†mean vector \n\\(\\mathbb{R}^p\\) variance-covariance matrix order \\(p\\)),\nwish compute values density evaluated\n\\(n\\) points single call function.need create function mvnpdf() file named mvnpdf.R\n folder package, :takes arguments:\nx matrix, \\(n\\) columns (observations) \\(p\\) rows\nmean vector means\nvarcovM variance-covariance matrix\nLog logical parameter, default value TRUE.\ntakes arguments:x matrix, \\(n\\) columns (observations) \\(p\\) rowsx matrix, \\(n\\) columns (observations) \\(p\\) rowsmean vector meansmean vector meansvarcovM variance-covariance matrixvarcovM variance-covariance matrixLog logical parameter, default value TRUE.Log logical parameter, default value TRUE.returns list containing matrix x, vector length \\(n\\)\nmultivariate normal distribution density values points.returns list containing matrix x, vector length \\(n\\)\nmultivariate normal distribution density values points.üëâ turn !‚ö†Ô∏è **WARNING ! click quickly link , invalidate participation class !function proposal can download\n.advice writing code, see \nR code section Hadley Wickam R packages online book.","code":""},{"path":"building-a-package.html","id":"documenting-a-function","chapter":"1 Building a  package","heading":"1.3 Documenting a function","text":"important properly document code. Every project least 2\ndevelopers:,,6 months.6 months.sake future self, favor take time document\ncode !strongly advise use roxygen2 package document\npackages. main advantage help function \nfile code defining function.üëâ turn!Start inserting skeleton helper ‚ÄúInsert Roxygen\nSkeleton‚Äù located ‚ÄúCode‚Äù menu Magic Wand sub-menu \nscript window.Start inserting skeleton helper ‚ÄúInsert Roxygen\nSkeleton‚Äù located ‚ÄúCode‚Äù menu Magic Wand sub-menu \nscript window.Complete documentation filling :Complete documentation filling :title function (first line)title function (first line)description function (second paragraph)description function (second paragraph)fill third paragraph, part go ‚ÄúDetails‚Äù section \nhelp pageif fill third paragraph, part go ‚ÄúDetails‚Äù section \nhelp pagethe meaning parametersthe meaning parametersthe output, @return tagthe output, @return tagGenerate documentation using ‚ÄúDocument‚Äù ‚Äú‚Äù menu \nBuild‚Äù tab (Ctrl+Shift+D devtools::document()). effect \ncommand multiple:man folder created inside , mvnpdf.Rd file contains help information functiona man folder created inside , mvnpdf.Rd file contains help information functionthe NAMESPACE file modifiedthe NAMESPACE file modifiedIn case problems curiosity done, can look \nproposal.details package documentation \nroxygen2 tags, see \nObject documentation secttion Hadley Wickam R packages online book.Let‚Äôs finish mentioning function usethis package initializes \nhome help page whole package:generated help page accessible, package installed,\nfollowing command:","code":"\nusethis::use_package_doc()\n?mypkgr"},{"path":"building-a-package.html","id":"interactively-test-the-package","chapter":"1 Building a  package","heading":"1.4 Interactively test the package","text":"test package, load R using ‚ÄúLoad ‚Äù (Ctrl+Shift+L) \n‚Äú‚Äù menu ‚ÄúBuild‚Äù tab, alternatively devtools::load_all()).can use package directly R: see\nhelp function ?mvnpdf example execute commands given example section help page.code development, can thus:Add/Modify  codeAdd/Modify  codeRe-load package Ctrl+Shift+LRe-load package Ctrl+Shift+LExperiment consoleExperiment consoleAnd ‚Ä¶‚Ä¶","code":"\n?mvndpf"},{"path":"building-a-package.html","id":"automatically-test-your-package","chapter":"1 Building a  package","heading":"1.5 Automatically test your package","text":"initialize automatic testing capabilities package, execute following command:command creates tests folder includes testthat.R file ‚Äì modified ‚Äì testthat folder add automated tests. tool based theory unit tests.example, content file call test-univariate.R put testthat folder:second one named test-bivariate.R :execute tests, can click ‚ÄúTest package‚Äù (Ctrl+Shift+T) ‚Äú‚Äù menu ‚ÄúBuild‚Äù tab, run devtools::test()advantage automatic tests run every time check package.good practice add unit test time bug identified fixed,\ncan immediately identify prevent error happening \nfuture.","code":"\nusethis::use_testthat()\ncontext(\"Univariate gaussian test\")\n\ntest_that(\"correct result for univariate gaussian\", {\n  expect_equal(mvnpdf(x=matrix(1.96), Log=FALSE)$y, dnorm(1.96))\n  expect_equal(mvnpdf(x=matrix(c(1.96, -0.5), ncol = 2), Log=FALSE)$y,\n               dnorm(c(1.96, -0.5)))\n})\ncontext(\"Bivariate gaussian test\")\n\ntest_that(\"correct results for bivariate gaussian\", {\n  expect_equal(mvnpdf(x=matrix(rep(1.96,2), nrow=2, ncol=1), Log=FALSE)$y,\n               mvtnorm::dmvnorm(rep(1.96, 2)))\n})"},{"path":"building-a-package.html","id":"checking-your-package","chapter":"1 Building a  package","heading":"1.6 Checking your package","text":"Ruunning check means ensuring tthat everything package correct work expected, can installed properly.\n‚ÄúPassing R CMD CHECK‚Äù mandatory successfully uploading package CRAN.perform R CMD CHECK package, can click ‚ÄúCheck‚Äù (Ctrl+Shift+E) ‚ÄúBuild‚Äù tab, run devtools::check().check, automated unitt tests developed previously \nexecuted. advantage written tests, don‚Äôt need worry , simply react adjust code errors returned flagged.","code":""},{"path":"building-a-package.html","id":"install-your-package","chapter":"1 Building a  package","heading":"1.7 Install your package","text":"moment, package exists environment associated Rstudio project created. able use anywhere (computer)  general way, install (like CRAN package example)., click ‚ÄúInstall Restart‚Äù (Ctrl+Shift+B) ‚ÄúBuild‚Äù tab, alternatively can run devtools::install().finally, can configure Rstudio‚Äôs behavior time installation, simultaneously documents package: go ‚Äú‚Äù menu ‚ÄúBuild‚Äù tab, ‚ÄúConfigure Build Tools‚Äù. click ‚ÄúConfigure‚Äù check box bottom ‚ÄúInstall Restart‚Äù.","code":""},{"path":"building-a-package.html","id":"appendix-1.1-add-an-s3-method","chapter":"1 Building a  package","heading":"1.8 Appendix 1.1: add an S3 method","text":"packages, oftten implement called S3 methods , result object res, one can run print(res), summary(res), plot(res)‚Ä¶example plot() method can add package:‚ö†Ô∏è Warning !order S3 method want apply \nresult function mvnpdf(), declare mvnpdf() returns result class mvnpdf.Test function, executing example.\n*Don‚Äôt forget reinstall package (‚ÄúInstall Restart‚Äù Ctrl+Shift+B).Look contents man folder changes made NAMESPACE.proposed solution: file\ncontains complete code mvnpdf() function associated plot() method.","code":"\n#' Plot of the mvnpdf function\n#'\n#' @param x an object of class \\code{mvnpdf} resulting from a call of\n#' \\code{mnvpdf()} function.\n#' @param ... graphical parameters passed to \\code{plot()} function.\n#'\n#' @return Nothing is returned, only a plot is given.\n#' @export\n#'\n#' @examples\n#' pdfvalues <- mvnpdf(x=matrix(seq(-3, 3, by = 0.1), nrow = 1), Log=FALSE)\n#' plot(pdfvalues)\nplot.mvnpdf <- function(x, ...) {\n  plot(x$x, x$y, type = \"l\", ...)\n}"},{"path":"building-a-package.html","id":"appendix-1.2-submit-ones-package-on-cran","chapter":"1 Building a  package","heading":"1.9 Appendix 1.2: submit one‚Äôs package on CRAN","text":"Run two following commands: devtools::check() followed devtools::submit_cran().\ndetails, see Hadley Wickham‚Äôs recommanded pipeline book R packages","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","text":"Nous nous int√©ressons ici aux solutions propos√©es par RStudio et GitHub pour\nl‚Äôh√©bergement et le contr√¥le de version de projets.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"principe-du-contr√¥le-de-version","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.1 Principe du contr√¥le de version","text":"Le principe du contr√¥le de version est d‚Äôenregistrer les changements\nsuccessifs apport√©s √† des fichiers (notamment des fichiers R).RStudio propose 2 solutions int√©gr√©es pour le contr√¥le de version :gitgitsvnsvn","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"git","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.1.1 git","text":"git est un logiciel de contr√¥le de version (c‚Äôest-√†-dire un outils qui va\nenregistrer l‚Äôhistoire des changements successifs de votre code et permettre de\npartager ces changements avec d‚Äôautres personnes). git est un logiciel en\nligne de commande, et sa prise en main n‚Äôest pas n√©cessairement intuitive.git fonctionne de la fa√ßon suivante : sur un serveur dans le ‚Äòcloud‚Äô,\nune version √† jour du code est disponible. √Ä tout moment il est possible\nd‚Äôacc√©der √† cette version du code en ligne. Chaque contributeur peut t√©l√©charger\ncette derni√®re version √† jour (dans une action que l‚Äôd√©nomme pull),\navant de l‚Äô√©diter localement. Une fois ses changements effectu√©s, le\ncontributeur peut alors mettre √† jour la version en ligne du code afin que ses\nchangements soient disponibles pour tout le monde (dans une action que l‚Äô\nd√©nomme push)NB : git √©t√© pens√© pour des fichiers l√©gers (comme par exemple des\nfichiers texte) et est loin d‚Äô√™tre optimis√© pour des fichiers trop lourds et/o√π\ncompress√©s.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"subversion","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.1.2 subversion","text":"subversion est l‚Äôautre solution disponible dans RStudio. Elle fonctionne de\nmani√®re similaire √† git, mais avec des fonctionnalit√©s un peu plus r√©duites\nque nous d√©taillons pas ici (la diff√©rence majeure est que tout les\ncontributeurs travaillent simultan√©ment sur la m√™me version du code).","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"utiliser-git-localement-depuis-rstudio","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.2 Utiliser git localement depuis RStudio","text":"vous de jouer !Commencez par activer git depuis l‚Äôonglet ‚ÄúGit/SVN‚Äù de ‚ÄúProject Options‚Äù\nsitu√© dans le menu ‚ÄúTools‚Äù et suivre les instructions. Vous pouvez aussi\nutilis√© usethis::use_git()Commencez par activer git depuis l‚Äôonglet ‚ÄúGit/SVN‚Äù de ‚ÄúProject Options‚Äù\nsitu√© dans le menu ‚ÄúTools‚Äù et suivre les instructions. Vous pouvez aussi\nutilis√© usethis::use_git()√Ä partir de l‚Äôonglet ‚ÄúGit‚Äù maintenant apparu √† c√¥t√© de l‚Äôonglet ‚ÄúBuild‚Äù,\nenregistrer l‚Äô√©tat actuel de votre package en r√©alisant votre premier ‚Äúcommit‚Äù :√Ä partir de l‚Äôonglet ‚ÄúGit‚Äù maintenant apparu √† c√¥t√© de l‚Äôonglet ‚ÄúBuild‚Äù,\nenregistrer l‚Äô√©tat actuel de votre package en r√©alisant votre premier ‚Äúcommit‚Äù :2a. s√©lectionner les fichiers √† suivre (ne pas s√©lectionner le fichier .Rproj)2a. s√©lectionner les fichiers √† suivre (ne pas s√©lectionner le fichier .Rproj)2b. √©crire un message informatif (pour vos collaborateurs - ce qui inclut votre futur vous)2b. √©crire un message informatif (pour vos collaborateurs - ce qui inclut votre futur vous)2c. cliquer sur ‚ÄúCommit‚Äù2c. cliquer sur ‚ÄúCommit‚ÄùAjouter une ligne ‚Äú*.Rproj‚Äù au fichier ‚Äú.gitignore‚Äù et effectuez un nouveau commitAjouter une ligne ‚Äú*.Rproj‚Äù au fichier ‚Äú.gitignore‚Äù et effectuez un nouveau commitVisualiser les changements et leur historique √† l‚Äôaide des outils de visualisation\n‚ÄúDiff‚Äù et ‚ÄúHistory‚Äù accessible depuis l‚Äôonglet ‚ÄúGit‚ÄùVisualiser les changements et leur historique √† l‚Äôaide des outils de visualisation\n‚ÄúDiff‚Äù et ‚ÄúHistory‚Äù accessible depuis l‚Äôonglet ‚ÄúGit‚Äù","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"bonnes-pratiques-du-commit","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.2.1 Bonnes pratiques du commit","text":"Id√©alement, chaque commit ne devrait r√©gler qu‚Äôun seul probl√®me. Il devrait le r√©gler dans\nson int√©gralit√© (√™tre complet) et ne contenir des changements relatifs qu‚Äôuniquement √†\nce probl√®me (√™tre minimal). Il est alors important d‚Äô√©crire des message de commit\ninformatifs (pensez √† vos collaborateur, qui incluent votre futur vous).\nIl faut √©galement √™tre concis, et d√©crire les raisons des changements plut√¥t que\nles changements eux-m√™mes (visibles dans le Diff). Il est parfois difficile de\nrespecter ces directives √† la lettre, et celles-ci ne sont qu‚Äôun guide et ne\ndoivent pas vous emp√™cher d‚Äôeffectuer des commits r√©guliers.Par ailleurs, la tentation d‚Äôavoir un historique de changements ‚Äúpropre‚Äù et bien\nordonn√© est naturelle, mais se r√©v√®le une source de probl√®mes inutiles. Elle\nentre en contradiction avec l‚Äôobjectif de tra√ßabilit√© du contr√¥le de version.\nLe d√©veloppement de code √©tant g√©n√©ralement un processus intellectuel complexe\net non lin√©aire, il est normal que l‚Äôenregistrement des changements refl√®te ce\ncheminement. En pratique, votre futur-vous sera le premier utilisateur de votre\nhistorique de changements et la priorit√© est donc de vous faciliter la tache\ndans le futur lors de la r√©solution de bug o√π l‚Äôextension de fonctionnalit√©s.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"github","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.3 GitHub","text":"GitHub est un site internet proposant une solution\nd‚Äôh√©bergement de code en ligne, et s‚Äôappuyant sur git. Il existe de nombreux\nsites web et services (gitlab, bitbucket, ‚Ä¶) permettant d‚Äôh√©berger du code et\ns‚Äôappuyant sur git. GitHub est tr√®s populaire dans la communaut√© des\nd√©veloppeurs , et est relativement facile √† utiliser, m√™me pour un\nutilisateur novice.Les avantages d‚Äôutiliser GitHub :une interface graphique simple pour suivre l‚Äôhistorique des changements de votre codeune interface graphique simple pour suivre l‚Äôhistorique des changements de votre codela derni√®re version de d√©veloppement de votre code est disponible en ligne et vous pouvez la\nr√©f√©rencer (peut m√™me r√©f√©rencer un num√©ro de commit pr√©cis pour geler une version sp√©cifique\ndu code)la derni√®re version de d√©veloppement de votre code est disponible en ligne et vous pouvez la\nr√©f√©rencer (peut m√™me r√©f√©rencer un num√©ro de commit pr√©cis pour geler une version sp√©cifique\ndu code)les utilisateurs disposent d‚Äôun canal clair et transparent pour signaler les bugs/difficult√©sles utilisateurs disposent d‚Äôun canal clair et transparent pour signaler les bugs/difficult√©scela facilite grandement le d√©veloppement collaboratifcela facilite grandement le d√©veloppement collaboratif","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"mettre-son-package-sur-github","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.3.1 Mettre son package  sur GitHub","text":"vous de jouer !Rendez-vous sur le site https://github.com/ et cr√©ez vous un compte\nGitHub (si vous h√©sitez, une convention courante est d‚Äôutiliser pr√©nomnom comme nom d‚Äôutilisateur)Rendez-vous sur le site https://github.com/ et cr√©ez vous un compte\nGitHub (si vous h√©sitez, une convention courante est d‚Äôutiliser pr√©nomnom comme nom d‚Äôutilisateur)Vous pouvez ensuite soit utiliser le client ‚ÄúGitHub desktop‚Äù install√© sur votre machine en vous connectant au compte GitHub et en suivant les instructions 3 et 4 suivantes, soit utiliser usethis::use_github() et vous laisser guider.Vous pouvez ensuite soit utiliser le client ‚ÄúGitHub desktop‚Äù install√© sur votre machine en vous connectant au compte GitHub et en suivant les instructions 3 et 4 suivantes, soit utiliser usethis::use_github() et vous laisser guider.Ajouter un nouveau projet local en cliquant sur l‚Äôicone ‚Äú+‚Äù en haut √† gauche de\nla fen√™tre du client, puis en choississant ‚ÄúAdd‚Äù et en rentrant le chemin du dossier\no√π se trouve le code de votre package.Ajouter un nouveau projet local en cliquant sur l‚Äôicone ‚Äú+‚Äù en haut √† gauche de\nla fen√™tre du client, puis en choississant ‚ÄúAdd‚Äù et en rentrant le chemin du dossier\no√π se trouve le code de votre package.Une fois le repertoire cr√©er en local, publiez le sur GitHub en cliquant sur ‚ÄúPublish‚Äù\nen haut √† droite de la fen√™tre du client. V√©rifiez sur le site de GitHub que votre\ncode √† bien √©t√© upload√© avec les 2 commits pr√©c√©dents.Une fois le repertoire cr√©er en local, publiez le sur GitHub en cliquant sur ‚ÄúPublish‚Äù\nen haut √† droite de la fen√™tre du client. V√©rifiez sur le site de GitHub que votre\ncode √† bien √©t√© upload√© avec les 2 commits pr√©c√©dents.Ajouter un fichier ‚ÄúREADME.Rmd‚Äù √† votre package afin de disposer d‚Äôune belle page\nd‚Äôaccueil sur GitHub :Ajouter un fichier ‚ÄúREADME.Rmd‚Äù √† votre package afin de disposer d‚Äôune belle page\nd‚Äôaccueil sur GitHub :5a. dans RStudio, executez la commande usethis::use_readme_rmd()5a. dans RStudio, executez la commande usethis::use_readme_rmd()5b. √† l‚Äôaide de l‚Äôoutilds ‚ÄúDiff‚Äù de l‚Äôonglet ‚ÄúGit‚Äù de RStudio, √©tudier\nles changements op√©rer par la commande pr√©c√©dente5b. √† l‚Äôaide de l‚Äôoutilds ‚ÄúDiff‚Äù de l‚Äôonglet ‚ÄúGit‚Äù de RStudio, √©tudier\nles changements op√©rer par la commande pr√©c√©dente5c. √©ditez le fichier ‚ÄúREADME.Rmd‚Äù cr√©√©, puis cr√©er le fichier README.md\ncorrespondant en executant knitr (cliquer su la pelotte de laine ‚ÄúKnit‚Äù\nen haut √† gauche dans Rstudio), avant d‚Äôeffectuer un 3e commit contenant ces\nchangements5c. √©ditez le fichier ‚ÄúREADME.Rmd‚Äù cr√©√©, puis cr√©er le fichier README.md\ncorrespondant en executant knitr (cliquer su la pelotte de laine ‚ÄúKnit‚Äù\nen haut √† gauche dans Rstudio), avant d‚Äôeffectuer un 3e commit contenant ces\nchangements5d. √† ce stade, si vous visitez la page de votre r√©pertoire sur GitHub,\nvotre 3e commit n‚Äôapparait pour l‚Äôinstant pas. Il faut synchroniser\nle r√©pertoire GitHub en ligne avec votre dossier local. Pour cela, vous\navez 2 solutions : soit utiliser le bouton ‚ÄúSync‚Äù en haut √† droit de la\nfen√™tre du client GitHub desktop ; soit directement depuis RStudio en cliquant\nsur ‚ÄúPush‚Äù depuis l‚Äôonglet ‚ÄúGit‚Äù. Maintenant, les changements du 3e commit sont\nvisibles en ligne dur GitHub.5d. √† ce stade, si vous visitez la page de votre r√©pertoire sur GitHub,\nvotre 3e commit n‚Äôapparait pour l‚Äôinstant pas. Il faut synchroniser\nle r√©pertoire GitHub en ligne avec votre dossier local. Pour cela, vous\navez 2 solutions : soit utiliser le bouton ‚ÄúSync‚Äù en haut √† droit de la\nfen√™tre du client GitHub desktop ; soit directement depuis RStudio en cliquant\nsur ‚ÄúPush‚Äù depuis l‚Äôonglet ‚ÄúGit‚Äù. Maintenant, les changements du 3e commit sont\nvisibles en ligne dur GitHub.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"collaboration-pour-la-production-du-code","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4 Collaboration pour la production du code","text":"git et GitHub sont particuli√®rement efficaces lorsque plusieurs personnes collaborent pour\nd√©velopper un code. En effet, chacun peut effectuer des pull et push successifs pour\napporter des changements au code, de mani√®re simultan√©e et en √©tant s√ªr de toujours travailler\nsur la derni√®re version. Nous allons voir diff√©rents concepts utiles dans le cas d‚Äôun tel travail\ncollaboratif.vous de jouer !En formant des groupes de 2, vous allez chacun ajouter votre binome comme ‚Äúcollaborator‚Äù\n√† votre repertoire GitHub √† partir de l‚Äôonglet ‚ÄúSettings‚Äù (sur GitHub).En formant des groupes de 2, vous allez chacun ajouter votre binome comme ‚Äúcollaborator‚Äù\n√† votre repertoire GitHub √† partir de l‚Äôonglet ‚ÄúSettings‚Äù (sur GitHub).Quelques instants plus tard le collaborateur ainsi ajout√© re√ßoit un email l‚Äôinvitant √†\naccepter l‚Äôajout. Cliquer sur le lien et accepter.Quelques instants plus tard le collaborateur ainsi ajout√© re√ßoit un email l‚Äôinvitant √†\naccepter l‚Äôajout. Cliquer sur le lien et accepter.Dans le client ‚ÄúGitHub desktop‚Äù, ajouter le r√©pertoire de votre bin√¥me en cliquant sur\nl‚Äôicone ‚Äú+‚Äù en haut √† gauche et en selectionnant ‚ÄúClone‚Äù, ce qui fait apparaitre la liste\ndes repertoires associ√©s √† votre compte GitHub non li√©s √† un dossier local.\nS√©lectionner le projet de votre binome.Dans le client ‚ÄúGitHub desktop‚Äù, ajouter le r√©pertoire de votre bin√¥me en cliquant sur\nl‚Äôicone ‚Äú+‚Äù en haut √† gauche et en selectionnant ‚ÄúClone‚Äù, ce qui fait apparaitre la liste\ndes repertoires associ√©s √† votre compte GitHub non li√©s √† un dossier local.\nS√©lectionner le projet de votre binome.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"branches","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.1 Branches","text":"Une des fonctionnalit√©s assez utile de git est les branches. Cela permet d‚Äôop√©rer des changements\nimportants dans le code sans perturber le fonctionnement actuel. C‚Äôest notamment utile pour explorer\nune piste de d√©veloppement dont ne sait pas si elle sera concluante au final.D‚Äôailleurs, vous utilisez d√©j√† les branches depuis le depuis de cette partie. En effet, la branche\npar d√©faut est appel√© ‚Äúmaster‚Äù.Gr√¢ce √† ce syst√®me de branches, obtient un arbre des diff√©rents commits au cours du temps (o√π\nles n≈ìuds correspondent √† la s√©parations des branches).","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"merge","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.2 Merge","text":"Un pull se d√©compose en 2 actions de la part de git :tout d‚Äôabord un fetch, qui correspond au t√©l√©chargement du code en lignetout d‚Äôabord un fetch, qui correspond au t√©l√©chargement du code en lignesuivi d‚Äôun merge qui fusionne la version locale avec les changements.suivi d‚Äôun merge qui fusionne la version locale avec les changements.Apr√®s avoir conduit un d√©veloppement exp√©rimental dans une branche, peut vouloir merger ces\nchangements dans la branche ‚Äúmaster‚Äù par exemple, apr√®s que l‚Äôexp√©rience se soit r√©v√©l√©e\nconcluante.Si un les changements concernent des parties distinctes du code, alors le merge peut\ns‚Äôeffectuer sans probl√®me. En revanche si les 2 versions √† merger comportent des changements\ndepuis leur dernier commit commun qui concerne les m√™mes lignes de codes, alors va rencontrer\nun (ou des ) conflit(s), qu‚Äôil va falloir r√©soudre.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"les-conflits","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.3 Les conflits","text":"Prenons l‚Äôexemple suivant : le d√©veloppeur \\(D_1\\) et le d√©veloppeur \\(D_2\\) tous les 2 pull√© la\nversion v0.1 du code √† l‚Äôinstant \\(t\\) sur leur machine respective. Ils travaillent chacun\nind√©pendamment pour apporter des changements au code. Au moment de pusher ses changements,\nle d√©veloppeur \\(D_2\\) re√ßoit un message d‚Äôerreur :‚ÄúSync Error.\nPlease resolve conflicted files, commit, try syncing .‚ÄùChaque fichier √©tant source de conflit alors √©t√© automatiquement √©dit√© comme suit :Pour r√©soudre le conflit, il faut alors √©diter chaque fichier un √† un en choisissant s‚Äôil faut\nconserver la version locale ou bien celle en ligne, avant de pouvoir commiter √† nouveau et enfin\nde pusher vos changements avec succ√®s.vous de jouer !Modifiez le fichier README.Rmd de votre binome, puis commitez votre changement et pushez\nle.Modifiez le fichier README.Rmd de votre binome, puis commitez votre changement et pushez\nle.une fois que votre bin√¥me modifi√© votre README.Rmd, modifiez √† votre tour le fichier\n√† la m√™me ligne, SANS puller les changements de votre bin√¥me au pr√©alable ! Commitez et\nessayez de pusher ces changements.une fois que votre bin√¥me modifi√© votre README.Rmd, modifiez √† votre tour le fichier\n√† la m√™me ligne, SANS puller les changements de votre bin√¥me au pr√©alable ! Commitez et\nessayez de pusher ces changements.R√©solvez le conflit.R√©solvez le conflit.","code":"<<<<<<< HEAD\ncode dans votre version local\n=======\ncode en ligne\n>>>>>>> remote"},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"fork","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.4 Fork","text":"L‚Äôaction fork permet de cr√©er une copie qui vous appartient √† partir d‚Äôun code disponible. Ainsi\nle code original ne sera pas impact√© par vos changements. Cela revient √† cr√©er une branche, et la\ns√©parer de l‚Äôarbre pour pouvoir en assumer la propri√©t√©.Cette action est principalement utile dans le cadre des pull requests.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"pull-request","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.5 Pull request","text":"Il s‚Äôagit du moyen le plus facile de proposer des changements dans un code dont vous n‚Äô√™tes pas\ncollaborateur. GitHub propose une interface graphique facilitant leur traitement.vous de jouer !Modifiez le README.Rmd de votre voisin qui n‚Äôest pas votre bin√¥me apr√®s avoir fork√© son\npackage.Modifiez le README.Rmd de votre voisin qui n‚Äôest pas votre bin√¥me apr√®s avoir fork√© son\npackage.Proposez votre changement sous la forme d‚Äôune pull request.Proposez votre changement sous la forme d‚Äôune pull request.Acceptez la pull request sur le site de GitHub et faire le merge.Acceptez la pull request sur le site de GitHub et faire le merge.","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"issues","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.4.6 Issues","text":"Pour n‚Äôimporte quel r√©pertoire GitHub, vous pouvez poster un commentaire sous forme d‚Äôissue\nafin d‚Äôalerter les d√©veloppeurs sur un √©ventuel bug, ou une question sur l‚Äôutilisation du package,\nou encore demander une fonctionnalit√© suppl√©mentaire‚Ä¶L‚Äôid√©al est de proposer vous-m√™me une pull request qui r√©sout votre issue lorsque vous\nle pouvez (.e.¬†en avez les capacit√©s et le temps).vous de jouer !Utilisez usethis::use_github_links() afin d‚Äôajouter les 2 lignes suivantes au fichier DESCRIPTION de votre packageURL: http://github.com/*prenom.nom*/mypkgBugReports: http://github.com/*prenom.nom*/mypkg/issuesUtilisez usethis::use_github_links() afin d‚Äôajouter les 2 lignes suivantes au fichier DESCRIPTION de votre packageURL: http://github.com/*prenom.nom*/mypkgBugReports: http://github.com/*prenom.nom*/mypkg/issuesVisualisez les nouveau changements, puis commitez les.Visualisez les nouveau changements, puis commitez les.Cr√©ez une issue sur le projet de votre binomeCr√©ez une issue sur le projet de votre binome","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"int√©gration-continue","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.5 Int√©gration continue","text":"√Ä chaque changement, √† chaque commit donc, il y la possibilit√© d‚Äôintroduire 1 (ou plusieurs)\nbugs qui vont emp√™cher le package de passer le CRAN check. Si l‚Äôaccumule trop de ces bugs,\nau moment de soumettre la nouvelle version, il peut y avoir beaucoup de corrections √† apporter.\nC‚Äôest d‚Äôautant plus frustrant si le package passait le CRAN check auparavant‚Ä¶Les services d‚Äôint√©gration continue permettent de checker votre package automatiquement apr√®s\nchaque commit ! En cas d‚Äô√©chec, vous recevez un mail qui vous en informe. Un certain nombre de ces\nservices proposent une offre limit√©e gratuite pour les projets open-source.Une autre raison d‚Äôutiliser l‚Äôint√©gration continue est qu‚Äôelle permet de tester votre package sur\ndes infrastructures diff√©rentes de la votre (e.g.¬†Windows, Ubuntu, Mac OS) et pour diff√©rentes\nversions de  (current, devel‚Ä¶)","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"github-actions","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.5.1 Github actions","text":"Les Github actions permettent de lancer des actions automatiquement √† chaque fois que vous pushez sur github. La commande usethis::use_github_action_check_standard() permet d‚Äôinitialiser les Github actions et d‚Äôajouter l‚Äôaction de check du package.vous de jouer !Executez la commande usethis::use_github_action_check_standard() et commitez les changements et regardez ce\nqu‚Äôil se passe sur page githubExecutez la commande usethis::use_github_action_check_standard() et commitez les changements et regardez ce\nqu‚Äôil se passe sur page githubAjouter un badge √† votre README.md gr√¢ce au code obtenu dans la console R\net commitez les changementsAjouter un badge √† votre README.md gr√¢ce au code obtenu dans la console R\net commitez les changementsN‚Äôh√©sitez pas √† consulter la page suivantes qui renseigne sur les diff√©rentes github actions pour les pacakges : https://github.com/r-lib/actions/blob/v1/examples/README.md","code":""},{"path":"contr√¥le-de-version-avec-git-et-github-historique-de-changement-d√©veloppement-collaboratif-et-int√©gration-continue.html","id":"annexe-2.1-couverture-du-code","chapter":"2 Contr√¥le de version avec git et GitHub : historique de changement, d√©veloppement collaboratif et int√©gration continue","heading":"2.6 Annexe 2.1 : couverture du code","text":"Le package covr propose une solution pour mesurer la couverture des tests unitaires associ√©s √† un\npackage. La couverture de test d√©termine la proportion du code source qui est effectivement utilis√©e\nlors de l‚Äôex√©cution des tests unitaires. La mesure de la couverture du code renforce la fiabilit√©\nd‚Äôun code et donne confiance √† ses utilisateurs potentiels.vous de jouer !Executez la commande usethis::use_coverage(), ajouter un joli badge √† votre README.md gr√¢ce au code obtenu dans la console RCommitez ces changements.Pour plus d‚Äôinformation n‚Äôh√©sitez pas √† consulter la vignette de covr.","code":""},{"path":"mesurer-et-comparer-des-temps-dex√©cution.html","id":"mesurer-et-comparer-des-temps-dex√©cution","chapter":"3 Mesurer et comparer des temps d‚Äôex√©cution","heading":"3 Mesurer et comparer des temps d‚Äôex√©cution","text":"La premi√®re √©tape avant d‚Äôoptimiser un code est de pouvoir mesurer son temps d‚Äôex√©cution,\nafin de pouvoir comparer les temps d‚Äôex√©cution entre diff√©rente impl√©mentations.","code":""},{"path":"mesurer-et-comparer-des-temps-dex√©cution.html","id":"mesurer-des-temps-dex√©cution-avec-system.time","chapter":"3 Mesurer et comparer des temps d‚Äôex√©cution","heading":"3.1 Mesurer des temps d‚Äôex√©cution avec system.time()","text":"Pour mesure le temps d‚Äôex√©cution d‚Äôune commande R, peut utiliser la\nfonction system.time() comme ceci :Le probl√®me qui appara√Æt sur cet exemple est que l‚Äôex√©cution est tellement\nrapide que system.time() affiche 0 (ou une valeur tr√®s proche).\nDe plus, voit qu‚Äôil y une certaine variabilit√© quand relance plusieurs\nfois la commande.Ainsi si souhaite comparer notre code avec la fonction mvtnorm::dmvnorm(),\nne peut pas utiliser system.time() :pourrait se dire qu‚Äôil faut augmenter la complexit√© de notre calcul, mais\nil y mieux : utiliser le package microbenchmark !","code":"\nsystem.time(mvnpdf(x=matrix(rep(1.96, 2), nrow=2, ncol=1), Log=FALSE))## utilisateur     syst√®me      √©coul√© \n##       0.001       0.001       0.003\nsystem.time(mvtnorm::dmvnorm(rep(1.96, 2)))## utilisateur     syst√®me      √©coul√© \n##       0.002       0.001       0.006"},{"path":"mesurer-et-comparer-des-temps-dex√©cution.html","id":"comparer-des-temps-dex√©cution-avec-microbenchmark","chapter":"3 Mesurer et comparer des temps d‚Äôex√©cution","heading":"3.2 Comparer des temps d‚Äôex√©cution avec microbenchmark()","text":"Comme son nom l‚Äôindique, ce package permet justement de comparer des temps\nd‚Äôex√©cution m√™me quand ceux-ci sont tr√®s faibles. De plus, la fonction\nmicrobenchmark() va r√©p√©ter un certain nombre de fois l‚Äôex√©cution des\ncommandes et donc va stabiliser le r√©sultat.Les deux fonctions mvnpdf() et dmnvorm() √©tant capables de prendre en\nentr√©e une matrice, peut √©galement comparer leurs comportements dans ce\ncas :Il s‚Äôest pass√© un quelque chose‚Ä¶ Et va diagnostiquer ce probl√®me dans la suite.","code":"\nlibrary(microbenchmark)\nmb <- microbenchmark(mvtnorm::dmvnorm(rep(1.96, 2)),\n                     mvnpdf(x=matrix(rep(1.96,2)), Log=FALSE),\n                     times=1000L)\nmb## Unit: microseconds\n##                                           expr    min     lq     mean median\n##                 mvtnorm::dmvnorm(rep(1.96, 2)) 30.237 34.058 52.02946 38.833\n##  mvnpdf(x = matrix(rep(1.96, 2)), Log = FALSE) 28.492 31.496 45.28976 34.846\n##      uq      max neval cld\n##  56.644 2486.725  1000   b\n##  52.124  238.796  1000  a## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead.\nn <- 100\nmb <- microbenchmark(mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n                     mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     times=100L)\nmb## Unit: microseconds\n##                                                       expr     min      lq\n##         mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))  76.921 121.900\n##  mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 714.938 965.764\n##      mean    median       uq      max neval cld\n##   252.237  185.1075  340.017  709.690   100  a \n##  1502.635 1372.2070 1880.828 3639.201   100   b## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead."},{"path":"profiler-son-code.html","id":"profiler-son-code","chapter":"4 Profiler son code","heading":"4 Profiler son code","text":"parle de profiling en anglais. Il s‚Äôagit de d√©terminer ce qui prend\ndu temps dans un code. Le √©tant une fois trouv√© le bloc de code qui prend\nle plus de temps dans l‚Äôex√©cution d‚Äôoptimiser uniquement cette brique.Pour obtenir un profiling du code ci-dessous, s√©lectionner les lignes de code\nd‚Äôint√©r√™t et aller dans le menu ‚ÄúProfile‚Äù puis ‚ÄúProfile Selected Lines‚Äù (ou\nCtrl+Alt+Shift P).OK, get ! Concat√©ner un vecteur au fur et √† mesure dans une boucle\nn‚Äôest vraiment pas une bonne id√©e.","code":"\nn <- 10e4\npdfval <- mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE)"},{"path":"profiler-son-code.html","id":"comparaison-avec-une-version-plus-habile-de-mnvpdf","chapter":"4 Profiler son code","heading":"4.1 Comparaison avec une version plus habile de mnvpdf()","text":"Consid√©rons une nouvelle version de mvnpdf(), appel√©e mvnpdfsmart().\nT√©l√©charger le\nfichier puis\nl‚Äôinclure dans le package.Profiler la commande suivante :effectivement r√©solu le probl√®me et apprend maintenant de mani√®re plus\nfine ce qui prend du temps dans notre fonction.Pour confirmer que mvnpdfsmart() est effectivement bien plus rapide que\nmvnpdf() peut re-faire une comparaison avec microbenchmark() :Et peut √©galement voir si devient comp√©titif avec dmvnorm() :Il y encore du travail‚Ä¶","code":"\nn <- 10e4\npdfval <- mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE)\nn <- 1000\nmb <- microbenchmark(mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     times=100L)\nmb## Unit: milliseconds\n##                                                            expr      min\n##       mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 4.790313\n##  mvnpdfsmart(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 3.470507\n##        lq     mean   median       uq      max neval cld\n##  5.023039 7.941819 5.951086 7.447729 38.57898   100   b\n##  3.736230 4.654822 3.817214 4.203385 13.84234   100  a## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead.\nn <- 1000\nmb <- microbenchmark(mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n                     mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     times=100L)\nmb## Unit: microseconds\n##                                                            expr      min\n##              mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))   77.999\n##       mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 4811.461\n##  mvnpdfsmart(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 3690.870\n##        lq      mean    median         uq       max neval cld\n##   113.547   226.023  153.2655   231.1895  1132.803   100 a  \n##  5637.466 10635.644 6557.2955 14264.7220 52341.565   100   c\n##  4137.653  7158.134 4897.3990  9816.1835 43621.789   100  b## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead."},{"path":"profiler-son-code.html","id":"comparaison-avec-une-version-optimis√©e-dans-r","chapter":"4 Profiler son code","heading":"4.2 Comparaison avec une version optimis√©e dans R","text":"Boris est arriv√©e apr√®s plusieurs recherches et tests √† une\nversion optimis√©e\navec les outils de R.Inclure la fonction mvnpdfoptim() dans le package, puis profiler cette\nfonction :Et un petit microbenchmark() :Pour finir peut profiler la fonction dmvnorm() :","code":"\nn <- 10e4\npdfval <- mvnpdfoptim(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE)\nn <- 1000\nmb <- microbenchmark(mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n                     mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfoptim(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     times=100L)\nmb## Unit: microseconds\n##                                                            expr      min\n##              mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))   67.308\n##       mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 4752.076\n##  mvnpdfsmart(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 3542.849\n##  mvnpdfoptim(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 2721.043\n##        lq      mean    median       uq       max neval  cld\n##    85.947  121.2509  100.9385  120.221   745.734   100 a   \n##  4984.280 7219.4899 5279.5135 6890.208 28675.782   100    d\n##  3706.249 4697.9993 3771.3055 4015.110 16556.949   100   c \n##  2826.413 3601.8965 2946.8220 3213.134 12935.049   100  b## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead.\nn <- 10e5\npdfval <- mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))"},{"path":"rcpp-ou-comment-int√©grer-facilement-du-code-cdans-un-package.html","id":"rcpp-ou-comment-int√©grer-facilement-du-code-cdans-un-package","chapter":"5 Rcpp ou comment int√©grer facilement du code C++dans un package ","heading":"5 Rcpp ou comment int√©grer facilement du code C++dans un package ","text":"Rcpp (R-C-Plus-Plus) est un package qui facilite l‚Äôinterface entre C++ et .  est un langage\ninterpr√©t√©, ce qui facilite un certain nombre de choses (notamment nous donne acc√®s √† la console\ndans laquelle peut √©valuer du code √† la vol√©e). N√©anmoins, cette facilit√© d‚Äôutilisation se\ncompense entre autre par des temps de calcul sup√©rieurs √† ceux de langages de plus bas niveau,\ntels que C, Fortran et C++ (mais qui n√©cessitent eux une compilation).dirigera le lecteur curieux vers le livre en ligne\nRcpp everyone de Masaki E. Tsuda, qui\nconstitue une ressource tr√®s compl√®te pour comprendre l‚Äôutilisation de Rcpp en plus de\nl‚Äôintroduction que l‚Äôpeut trouver dans le livre Advanced R d‚ÄôHadley\nWickham.","code":""},{"path":"rcpp-ou-comment-int√©grer-facilement-du-code-cdans-un-package.html","id":"premi√®re-fonction-en-rcpp","chapter":"5 Rcpp ou comment int√©grer facilement du code C++dans un package ","heading":"5.1 Premi√®re fonction en Rcpp","text":"vous de jouer !Afin de rendre votre package pr√™t pour l‚Äôutilisation avec Rcpp, commencez par executer la commande\nsuivante :Constatez les changements apport√©sConstatez les changements apport√©sil faut √©galement ajouter les 2 commentaires roxygen suivants dans la page d‚Äôaide du\npackage dans son ensemble :il faut √©galement ajouter les 2 commentaires roxygen suivants dans la page d‚Äôaide du\npackage dans son ensemble :Nous allons maintenant cr√©er une premi√®re fonction en Rcpp permettant d‚Äôinverser une matrice.\nPour cela, nous allons nous appuyer sur la library C++ Armadillo.\nIl s‚Äôagit d‚Äôune library d‚Äôalg√®bre lin√©aire moderne et simple, hautement optimis√©e, et interfac√©e\navec  via le package RcppArmadillo.C++ n‚Äôest pas un langage tr√®s diff√©rent de . Les principales diff√©rences qui nous concernent :C++est tr√®s efficaces pour le boucles (y compris les boucles embo√Æt√©es). Attention :\nil y souvent un sens qui est plus rapide que l‚Äôautre (ceci est d√ª √† la mani√®re dont C++ attribue\net parcours la m√©moire).C++est tr√®s efficaces pour le boucles (y compris les boucles embo√Æt√©es). Attention :\nil y souvent un sens qui est plus rapide que l‚Äôautre (ceci est d√ª √† la mani√®re dont C++ attribue\net parcours la m√©moire).Chaque commande doit se terminer par un point virgule ‚Äò;‚ÄôChaque commande doit se terminer par un point virgule ‚Äò;‚ÄôC++est un langage typ√© : il faut d√©clarer le type de chaque variable avant de pouvoir\nl‚Äôutiliser.C++est un langage typ√© : il faut d√©clarer le type de chaque variable avant de pouvoir\nl‚Äôutiliser.vous de jouer !Cr√©ez un nouveau fichier C++ depuis RStudio (via le menu File > New File > C++ File),\net enregistrez le dans le dossier src. Prenez le temps de le lire et essayez de comprendre\nchaque ligne.Cr√©ez un nouveau fichier C++ depuis RStudio (via le menu File > New File > C++ File),\net enregistrez le dans le dossier src. Prenez le temps de le lire et essayez de comprendre\nchaque ligne.Compilez et chargez votre package (via le bouton ‚ÄúInstall Restart‚Äù) et essayez d‚Äôutiliser\nla fonction timesTwo() depuis la console.Compilez et chargez votre package (via le bouton ‚ÄúInstall Restart‚Äù) et essayez d‚Äôutiliser\nla fonction timesTwo() depuis la console.Installez le package RcppArmadillo, et n‚Äôoubliez pas de faire les ajouts n√©cessaires dans\nDESCRIPTION (cf.¬†Rcpp pr√©c√©dement - vous pouvez exp√©rimentez avec la fonction\nRcppArmadillo::RcppArmadillo.package.skeleton() qui le d√©savantage de cr√©er beaucoup de fichiers\ninutiles)Installez le package RcppArmadillo, et n‚Äôoubliez pas de faire les ajouts n√©cessaires dans\nDESCRIPTION (cf.¬†Rcpp pr√©c√©dement - vous pouvez exp√©rimentez avec la fonction\nRcppArmadillo::RcppArmadillo.package.skeleton() qui le d√©savantage de cr√©er beaucoup de fichiers\ninutiles)√Ä l‚Äôaide de la documentation des packages Rcpp\net RcppArmadillo de celle de la\nlibrary Armadillo, tentez d‚Äô√©crire une courte fonction\ninvC en C++ calculant l‚Äôinverse d‚Äôune matrice.√Ä l‚Äôaide de la documentation des packages Rcpp\net RcppArmadillo de celle de la\nlibrary Armadillo, tentez d‚Äô√©crire une courte fonction\ninvC en C++ calculant l‚Äôinverse d‚Äôune matrice.Lorsque vous avez r√©ussi √† compiler votre fonction invC et qu‚Äôelle est acc√®ssible depuis \ncr√©er une fonction mvnpdf_invC() √† partir de l‚Äôimpl√©mentation de mvnpdfsmart en rempla√ßant\nuniquement les calculs d‚Äôinverse matriciel par un appel √† invC.Lorsque vous avez r√©ussi √† compiler votre fonction invC et qu‚Äôelle est acc√®ssible depuis \ncr√©er une fonction mvnpdf_invC() √† partir de l‚Äôimpl√©mentation de mvnpdfsmart en rempla√ßant\nuniquement les calculs d‚Äôinverse matriciel par un appel √† invC.Evaluer le gain en performance de cette nouvelle impl√©mentation mvnpdf_invCEvaluer le gain en performance de cette nouvelle impl√©mentation mvnpdf_invC","code":"\ndevtools::use_rcpp()\n#' @useDynLib mypkgr\n#' @importFrom Rcpp sourceCpp, .registration = TRUE\nNULL\nn <- 1000\nmb <- microbenchmark(mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n                     mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfoptim(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdf_invC(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     times=100L)\nmb## Unit: microseconds\n##                                                            expr      min\n##              mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))   71.603\n##       mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 4394.718\n##  mvnpdfsmart(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 3055.171\n##  mvnpdfoptim(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 2458.297\n##  mvnpdf_invC(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE) 3118.366\n##         lq      mean    median       uq       max neval cld\n##    88.6125  131.0086  106.0255  129.659   732.902   100 a  \n##  5035.0090 6673.3526 5262.9320 6308.673 34971.465   100   c\n##  3790.1275 4599.6529 3920.4310 4241.278 16861.129   100  b \n##  2893.1235 3942.1172 3062.0920 3566.399 15614.461   100  b \n##  3753.6965 4687.4476 3889.6020 4412.845 13158.539   100  b## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead.\nprofvis::profvis(mvnpdfoptim(x=matrix(1.96, \n    nrow = 2, ncol = 1000), Log=FALSE))\nprofvis::profvis(mvnpdfoptim(x=matrix(1.96, \n    nrow = 100, ncol = 1000), Log=FALSE))"},{"path":"rcpp-ou-comment-int√©grer-facilement-du-code-cdans-un-package.html","id":"optimisation-gr√¢ce-√†-c","chapter":"5 Rcpp ou comment int√©grer facilement du code C++dans un package ","heading":"5.2 Optimisation gr√¢ce √† C++","text":"En r√®gle g√©n√©rale, ne gagne pas beaucoup en temps de calcul en rempla√ßant une fonction \noptimis√©e par une fonction en C++. En effet, la plupart des fonctions de base de  s‚Äôappuie en\nr√©alit√© d√©j√† sur des routines C ou Fortran bien optimis√©e. Le gain se limite alors simplement\n√† la suppression des v√©rifications des arguments et de la gestion des diff√©rents types.vous de jouer !√Ä partir de mvnpdfsmart, proposez une impl√©mentation completement en C++ du calcul\nde densit√© de la loi Normale multivari√©e mvnpdfC().√Ä partir de mvnpdfsmart, proposez une impl√©mentation completement en C++ du calcul\nde densit√© de la loi Normale multivari√©e mvnpdfC().Evaluer le gain en performance de cette nouvelle impl√©mentation mvnpdf_invCEvaluer le gain en performance de cette nouvelle impl√©mentation mvnpdf_invCVous pouvez t√©l√©charger notre proposition de mvnpdfC.cpp ici.√Ä noter que vous pouvez utiliser des fonctions Rcpp en dehors de l‚Äôarchitecture\nd‚Äôun package gr√¢ce √† la fonction Rcpp::sourceCpp(). Mais comme nous avons\nqu‚Äôil est pr√©f√©rable de g√©rer tous ces code sous la forme de package, il est\npeu probable que vous en ayez besoin !","code":"\nn <- 1000\nmb <- microbenchmark(mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n                     mvnpdf(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfsmart(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfoptim(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdf_invC(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n                     mvnpdfC(x=matrix(1.96, nrow = 2, ncol = n), mean = rep(0, 2), varcovM = diag(2), Log=FALSE),\n                     times=100L)\nmb## Unit: microseconds\n##                                                                                                  expr\n##                                                    mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))\n##                                             mvnpdf(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)\n##                                        mvnpdfsmart(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)\n##                                        mvnpdfoptim(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)\n##                                        mvnpdf_invC(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)\n##  mvnpdfC(x = matrix(1.96, nrow = 2, ncol = n), mean = rep(0, 2),      varcovM = diag(2), Log = FALSE)\n##       min        lq      mean    median       uq       max neval  cld\n##    70.314   90.8555  118.7912  111.3245  128.202   403.318   100 a   \n##  4442.162 5034.0980 5806.1428 5218.3360 5723.780 15313.112   100    d\n##  3307.198 3782.3440 4830.3060 3919.2540 4222.309 42014.009   100   c \n##  2351.875 2831.7825 3329.2880 2997.8205 3220.057  9009.724   100  b  \n##  3218.508 3744.4270 4279.3562 3887.2750 4050.761 13810.887   100   c \n##    46.554   61.7370   87.4028   70.0115   77.825  1399.844   100 a## Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please\n## use `guide = \"none\"` instead."},{"path":"rcpp-ou-comment-int√©grer-facilement-du-code-cdans-un-package.html","id":"annexe-5.1-loptimisation-pr√©matur√©e-nest-pas-une-bonne-id√©e","chapter":"5 Rcpp ou comment int√©grer facilement du code C++dans un package ","heading":"5.3 Annexe 5.1 : l‚Äôoptimisation pr√©matur√©e n‚Äôest pas une bonne id√©e","text":"Chambers, Software Data Analysis: Programming R, Springer, 2008 :Including additional C code serious step, added dangers\noften substantial amount programming debugging required.\ngood reason.","code":""},{"path":"parall√©lisation-du-code.html","id":"parall√©lisation-du-code","chapter":"6 Parall√©lisation du code ","heading":"6 Parall√©lisation du code ","text":"","code":""},{"path":"parall√©lisation-du-code.html","id":"introduction-√†-lexecution-parall√®le-sous","chapter":"6 Parall√©lisation du code ","heading":"6.1 Introduction √† l‚Äôexecution parall√®le sous ","text":"En dehors de l‚Äôoptimisation du code et des algorithmes, une autre fa√ßon\nd‚Äôobtenir un code performant est de tirer profit des architectures parall√®les\ndes ordinateurs modernes. Il s‚Äôagit alors de parall√©liser son code afin de\nfaire des op√©rations simultan√©es sur des parties distinctes d‚Äôun m√™me probl√®me,\nen utilisant diff√©rent c≈ìurs de calcul. ne r√©duit pas le temps de calcul\ntotal n√©cessaire, mais l‚Äôensemble des op√©rations s‚Äôex√©cute plus rapidement.Il existe un nombre non n√©gligeable d‚Äôalgorithmes qui sont d‚Äôun ‚Äúparall√©lisme\nembarrassant‚Äù, c‚Äôest-√†-dire dont les calculs peuvent se d√©composer en plusieurs\nsous-calculs ind√©pendants. En statistique, il est ainsi souvent facile et direct\nde parall√©liser selon les diff√©rentes observations ou selon les diff√©rentes\ndimensions. Typiquement, il s‚Äôagit d‚Äôop√©rations que l‚Äôpeut √©crire sous la\nforme de boucle dont les op√©rations sont ind√©pendantes d‚Äôune it√©ration de la\nboucle √† l‚Äôautre.Les op√©rations n√©cessaires pour l‚Äô√©tablissement d‚Äôun code parall√®le sont les suivantes :D√©marrer \\(m\\) processus ‚Äútravailleurs‚Äù (.e.¬†c≈ìurs de calcul) et les initialiserD√©marrer \\(m\\) processus ‚Äútravailleurs‚Äù (.e.¬†c≈ìurs de calcul) et les initialiserEnvoyer les fonctions et donn√©es n√©cessaires pour chaque tache aux travailleursEnvoyer les fonctions et donn√©es n√©cessaires pour chaque tache aux travailleursS√©parer les taches en \\(m\\) op√©rations d‚Äôenvergure similaire et les envoyer aux travailleursS√©parer les taches en \\(m\\) op√©rations d‚Äôenvergure similaire et les envoyer aux travailleursAttendre que tous les travailleurs aient terminer leurs calculs et obtenir leurs r√©sultatsAttendre que tous les travailleurs aient terminer leurs calculs et obtenir leurs r√©sultatsRassembler les r√©sultats des diff√©rents travailleursRassembler les r√©sultats des diff√©rents travailleursArr√™ter les processus travailleursArr√™ter les processus travailleursSelon les plateformes, plusieurs protocoles de communications sont disponibles\nentre les c≈ìurs. Sous les syst√®mes UNIX, le protocole Fork est le plus\nutilis√©, mais il n‚Äôest pas disponible sous Windows o√π utilise\npr√©f√©rentiellement le protocole PSOCK. Enfin, pour les architecture de calcul\ndistribu√©e o√π les c≈ìurs ne se trouvent pas n√©cessairement sur le m√™me processeur\nphysique, utilise g√©n√©ralement le protocole MPI. L‚Äôavantage des packages\nfuture et future.apply est que le m√™me code pourra √™tre ex√©cut√© quelque soit\nla configuration mat√©rielle.Il existe un nombre important de packages et d‚Äôinitiatives permettant de faire\ndu calcul en R. Depuis R 2.14.0, le package\nparallel\nest inclus directement dans  et permet de d√©marrer et d‚Äôarr√™ter un ‚Äúcluster‚Äù\nde plusieurs processus travailleur (√©tape 1 et 6). En plus du package\nparallel, va donc utiliser le package future qui permet de g√©rer les\nprocessus travailleurs et la communication et l‚Äôarticulation avec le package\nfuture.applyqui permet lui de g√©rer le dialogue avec les travailleurs (envois,\nr√©ception et rassemblement des r√©sultats - √©tapes 2, 3, 4 et 5).","code":""},{"path":"parall√©lisation-du-code.html","id":"premi√®re-fonction-parall√®le-en","chapter":"6 Parall√©lisation du code ","heading":"6.2 Premi√®re fonction parall√®le en ","text":"√Ä vous de jouer !Commencez par √©crire une fonction simple qui calcule le logarithme de \\(n\\)\nnombres:D√©terminez combien de coeurs sont disponibles sur votre marchine gr√¢ce √†\nla fonction future::availableCores().D√©terminez combien de coeurs sont disponibles sur votre marchine gr√¢ce √†\nla fonction future::availableCores().√Ä l‚Äôaide de la fonction future::plan(multisession(workers = XX)),\nd√©clarez un ‚Äúplan‚Äù de calculs parall√®les sur votre ordinateur (en prenant garde\n√† laisser un coeur disponible pour traiter les autres processus).√Ä l‚Äôaide de la fonction future::plan(multisession(workers = XX)),\nd√©clarez un ‚Äúplan‚Äù de calculs parall√®les sur votre ordinateur (en prenant garde\n√† laisser un coeur disponible pour traiter les autres processus).√Ä l‚Äôaide d‚Äôune fonction de type apply future.apply::future_*apply(),\ncalculez le log des \\(n\\) nombres en parall√®le et concat√©nez les r√©sultats dans un\nvecteur.√Ä l‚Äôaide d‚Äôune fonction de type apply future.apply::future_*apply(),\ncalculez le log des \\(n\\) nombres en parall√®le et concat√©nez les r√©sultats dans un\nvecteur.Comparez le temps d‚Äô√©xecution avec celui d‚Äôune fonction s√©quentielle\nsur les 100 premiers entiers, gr√¢ce √† la commande :microbenchmark(log_par(1:100), log_seq(1:100), times=10)Comparez le temps d‚Äô√©xecution avec celui d‚Äôune fonction s√©quentielle\nsur les 100 premiers entiers, gr√¢ce √† la commande :microbenchmark(log_par(1:100), log_seq(1:100), times=10)La version parall√®le tourne beaucoup plus lentement‚Ä¶ Car en fait, si les\nt√¢ches individuelles sont trop rapides,  va passer plus de temps √†\ncommuniquer avec les c≈ìurs, qu‚Äô√† faire les calculs effectifs.Il faut qu‚Äôune it√©ration de la boucle soit relativement longue pour que le\ncalcul parall√®le apporte un gain en temps de calcul !En augmentant \\(n\\), observe une r√©duction de la diff√©rence entre les 2\nimpl√©mentations (le temps de calcul en parall√®le augmente tr√®s lentement compar√©\n√† l‚Äôaugmentation de celui de la fonction s√©quentielle).NB : les it√©rateurs d‚Äôitertools sont tr√®s performants mais ne peuvent\nservir que lorsque le code √† l‚Äôint√©rieur de future_*apply() est vectoris√© (il\nest toujours possible de vectoriser le code √† l‚Äôint√©rieur, par exemple avec une\nfonction de type apply). Ils minimisent le nombre de communication entre les\ncoeurs.","code":"\nlibrary(microbenchmark)\nlibrary(future.apply)\n\nlog_seq <- function(x){\n  # try this yourself (spoiler alert: it is quite long...):\n  # res <- numeric(length(x))\n  # for(i in 1:length(x)){\n  #   res[i] <- log(x[i])\n  # }\n  # return(res)\n  return(log(x))\n}\n\nlog_par <- function(x){\n  res <- future_sapply(1:length(x), FUN = function(i) {\n    log(x[i])\n  })\n  return(res)\n}\n\nplan(multisession(workers = 3))\nmb <- microbenchmark(log_par(1:100), log_seq(1:100), times = 50)"},{"path":"parall√©lisation-du-code.html","id":"parall√©lisation-efficace","chapter":"6 Parall√©lisation du code ","heading":"6.3 Parall√©lisation efficace","text":"va maintenant se pencher sur un autre cas d‚Äôutilisation. Imaginons que l‚Äô\nait un grand tableau de donn√©es de taille comportant 10 observations pour 100\n000 variables (e.g.¬†des mesures de g√©nomique), et que l‚Äôveuille calculer la\nm√©diane pour chacune de ces variables.Pour un utilisateur averti de , une telle op√©ration se programme facilement\n√† l‚Äôaide de la fonction apply :En r√©alit√©, une boucle n‚Äôest pas plus lente √† condition d‚Äô√™tre bien\nprogramm√©e :√Ä vous de jouer !\nEssayez d‚Äôam√©liorer encore ce temps de calcul en parall√©lisant :Parall√©lisez le calcul de la m√©diane de chacune des 100 000 variables.\nObserve-t-un gain en temps de calcul ?Parall√©lisez le calcul de la m√©diane de chacune des 100 000 variables.\nObserve-t-un gain en temps de calcul ?Proposez une impl√©mentation alternative gr√¢ce √† la fonction\nitertools::isplitIndices() qui permet de s√©parer vos donn√©es (les \\(n\\) nombres)\nen autant de groupes que vous avez de coeurs. Comparez √† nouveau les temps de\ncalcul.Proposez une impl√©mentation alternative gr√¢ce √† la fonction\nitertools::isplitIndices() qui permet de s√©parer vos donn√©es (les \\(n\\) nombres)\nen autant de groupes que vous avez de coeurs. Comparez √† nouveau les temps de\ncalcul.","code":"\nx <- matrix(rnorm(1e6), nrow = 10)\ndim(x)## [1]     10 100000\ncolmedian_apply <- function(x){\n  return(apply(x, 2, median))\n}\nsystem.time(colmedian_apply(x))## utilisateur     syst√®me      √©coul√© \n##       2.871       0.008       2.883\ncolmedian_for <- function(x){\n  ans <- rep(0, ncol(x)) \n  for (i in 1:ncol(x)) {\n    ans[i] <- median(x[, i]) \n  }\n  return(ans)\n}\nsystem.time(colmedian_for(x))## utilisateur     syst√®me      √©coul√© \n##       2.895       0.010       2.917\ncolmedian_par <- function(x){\n  res <- future_sapply(1:ncol(x), FUN = function(i) {\n          median(x[, i])\n    })\n  return(res)\n}\nplan(multisession(workers = 3))\nsystem.time(colmedian_par(x))## utilisateur     syst√®me      √©coul√© \n##       0.101       0.019       1.439\ncolmedian_parIter <- function(x, ncores = 1){\n  iter <- itertools::isplitIndices(n = ncol(x), chunks = ncores)\n  res <- future_sapply(iter, FUN = function(i) {\n          apply(x[, i], 2, median)\n    })\n  return(unlist(res))\n}\nsystem.time(colmedian_parIter(x, ncores = 3))## utilisateur     syst√®me      √©coul√© \n##       0.082       0.017       1.245\nmb <- microbenchmark(colmedian_apply(x), \n                     colmedian_for(x),\n                     colmedian_par(x),\n                     colmedian_parIter(x, ncores = 3), times = 10)\nmb## Unit: milliseconds\n##                              expr       min       lq     mean   median       uq\n##                colmedian_apply(x) 2508.9098 2629.735 2689.872 2691.283 2783.711\n##                  colmedian_for(x) 2549.3103 2574.686 2758.920 2674.481 2740.282\n##                  colmedian_par(x) 1092.2788 1123.261 1154.978 1133.733 1143.486\n##  colmedian_parIter(x, ncores = 3)  993.0038 1045.915 1129.355 1081.597 1111.276\n##       max neval cld\n##  2796.538    10   b\n##  3612.499    10   b\n##  1362.110    10  a \n##  1636.029    10  a"},{"path":"parall√©lisation-du-code.html","id":"les-it√©rateurs","chapter":"6 Parall√©lisation du code ","heading":"6.3.1 Les it√©rateurs","text":"Le package itertools permet de s√©parer facilement des donn√©es ou des\ntaches (√©tape 3) tout en minimisant les communications avec les diff√©rents\ntravailleurs. Il s‚Äôappuie sur une impl√©mentation des it√©rateurs en .\nSon utilisation n√©cessite n√©anmoins de vectoriser le code √† l‚Äôint√©rieur de\nfuture_*apply(). Exp√©rimentez avec le petit code ci-dessous :","code":"\nmyiter <- itertools::isplitIndices(n = 30, chunks = 3)\n\n# Une premi√®re fois\niterators::nextElem(myiter)##  [1]  1  2  3  4  5  6  7  8  9 10\n# Une deuxi√®me fois... Oh ?!\niterators::nextElem(myiter)##  [1] 11 12 13 14 15 16 17 18 19 20\n# Encore !\niterators::nextElem(myiter)##  [1] 21 22 23 24 25 26 27 28 29 30\n# Encore ?\niterators::nextElem(myiter)## Error: StopIteration"},{"path":"parall√©lisation-du-code.html","id":"les-autres-plans-de-calculs-parall√®le","chapter":"6 Parall√©lisation du code ","heading":"6.3.2 Les autres ‚Äúplans‚Äù de calculs parall√®le","text":"Pour ex√©cuter votre code (exactement le m√™me code, c‚Äôest un des avantages\ndu packages de la famille future*), vous devez r√©gler un ‚Äúplan‚Äù de calculs :sur un ordinateur (ou un unique serveur de calcul) sous Unix (Linux, Mac OS),\nvous pouvez utiliser plan(multicore(workers = XX)) qui est souvent plus\nperformant. Le plan multisession fonctionne toujours.sur un ordinateur (ou un unique serveur de calcul) sous Unix (Linux, Mac OS),\nvous pouvez utiliser plan(multicore(workers = XX)) qui est souvent plus\nperformant. Le plan multisession fonctionne toujours.sur un cluster de calculs (type Avakas √† Bordeaux), nous renvoyons au package\nfuture.batchtoolssur un cluster de calculs (type Avakas √† Bordeaux), nous renvoyons au package\nfuture.batchtools","code":""},{"path":"parall√©lisation-du-code.html","id":"parall√©lisation-dans-notre-exemple-fil-rouge","chapter":"6 Parall√©lisation du code ","heading":"6.4 Parall√©lisation dans notre exemple fil rouge","text":"√Ä vous de jouer !√Ä partir de la fonction mvnpdfoptim() et/ou mvnpdfsmart(), proposez\nune impl√©mentation parall√©lisant les calculs sur les observations (colonnes de \\(x\\))√Ä partir de la fonction mvnpdfoptim() et/ou mvnpdfsmart(), proposez\nune impl√©mentation parall√©lisant les calculs sur les observations (colonnes de \\(x\\))Comparez les temps de calcul sur 10 000 observationsComparez les temps de calcul sur 10 000 observations","code":"\nplan(multisession(workers = 3))\nn <- 10000\nmb <- microbenchmark::microbenchmark(\n  mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2)),\n  mypkgr::mvnpdfoptim(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n  mypkgr::mvnpdfoptim_par(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE),\n  mypkgr::mvnpdfoptim_parIter(x=matrix(1.96, nrow = 2, ncol = n), Log=FALSE, ncores = 3),\n  times=20L)\nmb## Unit: microseconds\n##                                                                                             expr\n##                                               mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))\n##                           mypkgr::mvnpdfoptim(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)\n##                  mypkgr::mvnpdfoptim_par(x = matrix(1.96, nrow = 2, ncol = n),      Log = FALSE)\n##  mypkgr::mvnpdfoptim_parIter(x = matrix(1.96, nrow = 2, ncol = n),      Log = FALSE, ncores = 3)\n##        min         lq       mean     median         uq       max neval cld\n##    300.519   344.0155   362.6347   352.9305   392.7385    447.60    20  a \n##  24144.586 27844.8270 29340.4425 28354.5550 29700.8440  37591.64    20  ab\n##  21117.246 24406.5590 25520.3099 25217.5930 26919.3365  28695.41    20  ab\n##  20026.677 22529.1105 40802.1316 25208.0950 26377.1595 349567.61    20   b"},{"path":"parall√©lisation-du-code.html","id":"conclusion","chapter":"6 Parall√©lisation du code ","heading":"6.5 Conclusion","text":"La parall√©lisation permet de gagner du temps, mais il faut d‚Äôabord bien\noptimiser son code. Quand parall√©lise un code, le gain sur la dur√©e\nd‚Äôex√©cution d√©pend avant tout du ratio entre le temps de communication et le\ntemps de calcul effectif pour chaque tache.","code":""},{"path":"misc√©lan√©es.html","id":"misc√©lan√©es","chapter":"7 Misc√©lan√©es","heading":"7 Misc√©lan√©es","text":"","code":""},{"path":"misc√©lan√©es.html","id":"debugging-avec-browser","chapter":"7 Misc√©lan√©es","heading":"7.1 Debugging avec browser()","text":"","code":""},{"path":"misc√©lan√©es.html","id":"attach","chapter":"7 Misc√©lan√©es","heading":"7.2 attach","text":"","code":""},{"path":"misc√©lan√©es.html","id":"gestion-m√©moire","chapter":"7 Misc√©lan√©es","heading":"7.3 gestion m√©moire","text":"","code":""},{"path":"misc√©lan√©es.html","id":"copies-et-variables-localesglobales-dans-les-fonctions","chapter":"7 Misc√©lan√©es","heading":"7.4 copies et variables locales/globales dans les fonctions","text":"","code":""},{"path":"misc√©lan√©es.html","id":"naming","chapter":"7 Misc√©lan√©es","heading":"7.5 naming","text":"","code":""},{"path":"misc√©lan√©es.html","id":"gpplot2","chapter":"7 Misc√©lan√©es","heading":"7.6 gpplot2","text":"","code":""},{"path":"take-home-message.html","id":"take-home-message","chapter":"8 Take Home message","heading":"8 Take Home message","text":"MAKE PACKAGESMAKE PACKAGESuse git, least locally yourselfuse git, least locally yourselfif needed (.e.¬†optimization  code ), afraid using Rcpp /parallelizing tour codeif needed (.e.¬†optimization  code ), afraid using Rcpp /parallelizing tour code","code":""},{"path":"further-reading.html","id":"further-reading","chapter":"Further reading","heading":"Further reading","text":"Hadley Wickham‚Äôs online books truly excellent contain lot supplementary informattion covered training:\nwebsite writing packages R packages.\nwebsite Advanced R everything regarding optimization, Rcpp, parallel computing.\nwebsite R Data Science also quite comprehensive includes chapters data management , also structures , modeling, well elements graphics Rmarkdown.\nHadley Wickham‚Äôs online books truly excellent contain lot supplementary informattion covered training:website writing packages R packages.website writing packages R packages.website Advanced R everything regarding optimization, Rcpp, parallel computing.website Advanced R everything regarding optimization, Rcpp, parallel computing.website R Data Science also quite comprehensive includes chapters data management , also structures , modeling, well elements graphics Rmarkdown.website R Data Science also quite comprehensive includes chapters data management , also structures , modeling, well elements graphics Rmarkdown.online book Rcpp everyone Masaki E. Tsuda also good.online book Rcpp everyone Masaki E. Tsuda also good.","code":""}]
