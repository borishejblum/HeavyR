<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 Parallélisation du code  | Advanced  course</title>
<meta name="author" content="Robin Genuer &amp; Boris Hejblum">
<meta name="description" content="6.1 Introduction à l’execution parallèle sous  En dehors de l’optimisation du code et des algorithmes, une autre façon d’obtenir un code performant est de tirer profit des architectures parallèles...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 6 Parallélisation du code  | Advanced  course">
<meta property="og:type" content="book">
<meta property="og:description" content="6.1 Introduction à l’execution parallèle sous  En dehors de l’optimisation du code et des algorithmes, une autre façon d’obtenir un code performant est de tirer profit des architectures parallèles...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 6 Parallélisation du code  | Advanced  course">
<meta name="twitter:description" content="6.1 Introduction à l’execution parallèle sous  En dehors de l’optimisation du code et des algorithmes, une autre façon d’obtenir un code performant est de tirer profit des architectures parallèles...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="&lt;em&gt;Tools for software development and performance&lt;/em&gt;">Advanced <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> course</a>:
        <small class="text-muted"><em>Tools for software development and performance</em></small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Course syllabus</a></li>
<li><a class="" href="building-a-package.html"><span class="header-section-number">1</span> Building a  package</a></li>
<li><a class="" href="version-control-with-git-and-github.html"><span class="header-section-number">2</span> Version control with git and GitHub</a></li>
<li><a class="" href="mesurer-et-comparer-des-temps-dex%C3%A9cution.html"><span class="header-section-number">3</span> Mesurer et comparer des temps d’exécution</a></li>
<li><a class="" href="profiler-son-code.html"><span class="header-section-number">4</span> Profiler son code</a></li>
<li><a class="" href="rcpp-ou-comment-int%C3%A9grer-facilement-du-code-cdans-un-package.html"><span class="header-section-number">5</span> Rcpp ou comment intégrer facilement du code C++dans un package </a></li>
<li><a class="active" href="parall%C3%A9lisation-du-code.html"><span class="header-section-number">6</span> Parallélisation du code </a></li>
<li><a class="" href="misc%C3%A9lan%C3%A9es.html"><span class="header-section-number">7</span> Miscélanées</a></li>
<li><a class="" href="take-home-message.html"><span class="header-section-number">8</span> Take Home message</a></li>
<li><a class="" href="further-reading.html">Further reading</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="parallélisation-du-code" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Parallélisation du code <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg><a class="anchor" aria-label="anchor" href="#parall%C3%A9lisation-du-code"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-à-lexecution-parallèle-sous" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Introduction à l’execution parallèle sous <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg><a class="anchor" aria-label="anchor" href="#introduction-%C3%A0-lexecution-parall%C3%A8le-sous"><i class="fas fa-link"></i></a>
</h2>
<p>En dehors de l’optimisation du code et des algorithmes, une autre façon
d’obtenir un code performant est de tirer profit des architectures parallèles
des ordinateurs modernes. Il s’agit alors de <strong>paralléliser</strong> son code afin de
faire des opérations simultanées sur des parties distinctes d’un même problème,
en utilisant différent cœurs de calcul. On ne réduit pas le temps de calcul
total nécessaire, mais l’ensemble des opérations s’exécute plus rapidement.</p>
<p>Il existe un nombre non négligeable d’algorithmes qui sont d’un “parallélisme
embarrassant”, c’est-à-dire dont les calculs peuvent se décomposer en plusieurs
sous-calculs indépendants. En statistique, il est ainsi souvent facile et direct
de paralléliser selon les différentes observations ou selon les différentes
dimensions. Typiquement, il s’agit d’opérations que l’on peut écrire sous la
forme de boucle dont les opérations sont indépendantes d’une itération de la
boucle à l’autre.</p>
<p><strong>Les opérations nécessaires pour l’établissement d’un code parallèle sont les suivantes :</strong></p>
<ol style="list-style-type: decimal">
<li><p>Démarrer <span class="math inline">\(m\)</span> processus “travailleurs” (i.e. cœurs de calcul) et les initialiser</p></li>
<li><p>Envoyer les fonctions et données nécessaires pour chaque tache aux travailleurs</p></li>
<li><p>Séparer les taches en <span class="math inline">\(m\)</span> opérations d’envergure similaire et les envoyer aux travailleurs</p></li>
<li><p>Attendre que tous les travailleurs aient terminer leurs calculs et obtenir leurs résultats</p></li>
<li><p>Rassembler les résultats des différents travailleurs</p></li>
<li><p>Arrêter les processus travailleurs</p></li>
</ol>
<p>Selon les plateformes, plusieurs protocoles de communications sont disponibles
entre les cœurs. Sous les systèmes UNIX, le protocole <em>Fork</em> est le plus
utilisé, mais il n’est pas disponible sous Windows où on utilise
préférentiellement le protocole <em>PSOCK</em>. Enfin, pour les architecture de calcul
distribuée où les cœurs ne se trouvent pas nécessairement sur le même processeur
physique, on utilise généralement le protocole <em>MPI</em>. L’avantage des packages
<code>future</code> et <code>future.apply</code> est que le même code pourra être exécuté quelque soit
la configuration matérielle.</p>
<p>Il existe un nombre important de packages et d’initiatives permettant de faire
du calcul en R. Depuis <code>R 2.14.0</code>, le package
<a href="https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf"><code>parallel</code></a>
est inclus directement dans <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> et permet de démarrer et d’arrêter un “cluster”
de plusieurs processus travailleur (étape 1 et 6). En plus du package
<code>parallel</code>, on va donc utiliser le package <code>future</code> qui permet de gérer les
processus travailleurs et la communication et l’articulation avec le package
<code>future.apply</code>qui permet lui de gérer le dialogue avec les travailleurs (envois,
réception et rassemblement des résultats - étapes 2, 3, 4 et 5).</p>
</div>
<div id="première-fonction-parallèle-en" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Première fonction parallèle en <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg><a class="anchor" aria-label="anchor" href="#premi%C3%A8re-fonction-parall%C3%A8le-en"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p><strong><em>À vous de jouer !</em></strong></p>
<p>Commencez par écrire une fonction simple qui calcule le logarithme de <span class="math inline">\(n\)</span>
nombres:</p>
<ol style="list-style-type: decimal">
<li><p>Déterminez combien de coeurs sont disponibles sur votre marchine grâce à
la fonction <code><a href="https://future.futureverse.org/reference/re-exports.html">future::availableCores()</a></code>.</p></li>
<li><p>À l’aide de la fonction <code>future::plan(multisession(workers = XX))</code>,
déclarez un “plan” de calculs parallèles sur votre ordinateur (en prenant garde
à <strong>laisser un coeur disponible</strong> pour traiter les autres processus).</p></li>
<li><p>À l’aide d’une fonction de type apply <code>future.apply::future_*apply()</code>,
calculez le log des <span class="math inline">\(n\)</span> nombres en parallèle et concaténez les résultats dans un
vecteur.</p></li>
<li><p>Comparez le temps d’éxecution avec celui d’une fonction séquentielle
sur les 100 premiers entiers, grâce à la commande :<br><code>microbenchmark(log_par(1:100), log_seq(1:100), times=10)</code></p></li>
</ol>
</blockquote>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/">microbenchmark</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://future.apply.futureverse.org">future.apply</a></span><span class="op">)</span>

<span class="va">log_seq</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># try this yourself (spoiler alert: it is quite long...):</span>
  <span class="co"># res &lt;- numeric(length(x))</span>
  <span class="co"># for(i in 1:length(x)){</span>
  <span class="co">#   res[i] &lt;- log(x[i])</span>
  <span class="co"># }</span>
  <span class="co"># return(res)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">log_par</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://future.apply.futureverse.org/reference/future_lapply.html">future_sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/multisession.html">multisession</a></span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">mb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span><span class="op">(</span><span class="fu">log_par</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>, <span class="fu">log_seq</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="AdvancedRcourse_dev_perf_files/figure-html/unnamed-chunk-37-1.png" width="672"></div>
<p>La version parallèle tourne beaucoup plus lentement… Car en fait, si les
tâches individuelles sont trop rapides, <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> va passer plus de temps à
communiquer avec les cœurs, qu’à faire les calculs effectifs.</p>
<p><strong>Il faut qu’une itération de la boucle soit relativement longue pour que le
calcul parallèle apporte un gain en temps de calcul !</strong></p>
<p>En augmentant <span class="math inline">\(n\)</span>, on observe une réduction de la différence entre les 2
implémentations (le temps de calcul en parallèle augmente très lentement comparé
à l’augmentation de celui de la fonction séquentielle).</p>
<p><strong>NB :</strong> les itérateurs d’<code>itertools</code> sont très performants mais ne peuvent
servir que lorsque le code à l’intérieur de <code>future_*apply()</code> est vectorisé (il
est toujours possible de vectoriser le code à l’intérieur, par exemple avec une
fonction de type <code>apply</code>). Ils minimisent le nombre de communication entre les
coeurs.</p>
</div>
<div id="parallélisation-efficace" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Parallélisation efficace<a class="anchor" aria-label="anchor" href="#parall%C3%A9lisation-efficace"><i class="fas fa-link"></i></a>
</h2>
<p>On va maintenant se pencher sur un autre cas d’utilisation. Imaginons que l’on
ait un grand tableau de données de taille comportant 10 observations pour 100
000 variables (e.g. des mesures de génomique), et que l’on veuille calculer la
médiane pour chacune de ces variables.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]     10 100000</code></pre>
<p>Pour un utilisateur averti de <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>, une telle opération se programme facilement
à l’aide de la fonction <code>apply</code> :</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colmedian_apply</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span>, <span class="va">median</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="fu">colmedian_apply</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## utilisateur     système      écoulé 
##       2.883       0.013       2.959</code></pre>
<p>En réalité, une boucle <code>for</code> n’est pas plus lente à condition d’être bien
programmée :</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colmedian_for</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="va">ans</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> 
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">ans</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span> 
  <span class="op">}</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">ans</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="fu">colmedian_for</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## utilisateur     système      écoulé 
##       2.554       0.007       2.565</code></pre>
<blockquote>
<p><strong><em>À vous de jouer !</em></strong><br>
Essayez d’améliorer encore ce temps de calcul en parallélisant :</p>
<ol style="list-style-type: decimal">
<li><p>Parallélisez le calcul de la médiane de chacune des 100 000 variables.
Observe-t-on un gain en temps de calcul ?</p></li>
<li><p>Proposez une implémentation alternative grâce à la fonction
<code><a href="https://rdrr.io/pkg/itertools/man/isplitIndices.html">itertools::isplitIndices()</a></code> qui permet de séparer vos données (les <span class="math inline">\(n\)</span> nombres)
en autant de groupes que vous avez de coeurs. Comparez à nouveau les temps de
calcul.</p></li>
</ol>
</blockquote>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colmedian_par</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://future.apply.futureverse.org/reference/future_lapply.html">future_sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/multisession.html">multisession</a></span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="fu">colmedian_par</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## utilisateur     système      écoulé 
##       0.101       0.019       1.439</code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colmedian_parIter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">ncores</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span>
  <span class="va">iter</span> <span class="op">&lt;-</span> <span class="fu">itertools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/itertools/man/isplitIndices.html">isplitIndices</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ncores</span><span class="op">)</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://future.apply.futureverse.org/reference/future_lapply.html">future_sapply</a></span><span class="op">(</span><span class="va">iter</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
          <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">median</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="fu">colmedian_parIter</span><span class="op">(</span><span class="va">x</span>, ncores <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## utilisateur     système      écoulé 
##       0.082       0.017       1.245</code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span><span class="op">(</span><span class="fu">colmedian_apply</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, 
                     <span class="fu">colmedian_for</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,
                     <span class="fu">colmedian_par</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,
                     <span class="fu">colmedian_parIter</span><span class="op">(</span><span class="va">x</span>, ncores <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="va">mb</span></code></pre></div>
<pre><code>## Unit: milliseconds
##                              expr       min       lq     mean   median       uq
##                colmedian_apply(x) 2508.9098 2629.735 2689.872 2691.283 2783.711
##                  colmedian_for(x) 2549.3103 2574.686 2758.920 2674.481 2740.282
##                  colmedian_par(x) 1092.2788 1123.261 1154.978 1133.733 1143.486
##  colmedian_parIter(x, ncores = 3)  993.0038 1045.915 1129.355 1081.597 1111.276
##       max neval cld
##  2796.538    10   b
##  3612.499    10   b
##  1362.110    10  a 
##  1636.029    10  a</code></pre>
<div class="inline-figure"><img src="AdvancedRcourse_dev_perf_files/figure-html/unnamed-chunk-42-1.png" width="672"></div>
<div id="les-itérateurs" class="section level3" number="6.3.1">
<h3>
<span class="header-section-number">6.3.1</span> Les itérateurs<a class="anchor" aria-label="anchor" href="#les-it%C3%A9rateurs"><i class="fas fa-link"></i></a>
</h3>
<p>Le package <code>itertools</code> permet de séparer facilement des données ou des
taches (étape 3) tout en minimisant les communications avec les différents
travailleurs. Il s’appuie sur une implémentation des itérateurs en <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>.
Son utilisation nécessite néanmoins de vectoriser le code à l’intérieur de
<code>future_*apply()</code>. Expérimentez avec le petit code ci-dessous :</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">myiter</span> <span class="op">&lt;-</span> <span class="fu">itertools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/itertools/man/isplitIndices.html">isplitIndices</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, chunks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># Une première fois</span>
<span class="fu">iterators</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/iterators/man/nextElem.html">nextElem</a></span><span class="op">(</span><span class="va">myiter</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Une deuxième fois... Oh ?!</span>
<span class="fu">iterators</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/iterators/man/nextElem.html">nextElem</a></span><span class="op">(</span><span class="va">myiter</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] 11 12 13 14 15 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Encore !</span>
<span class="fu">iterators</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/iterators/man/nextElem.html">nextElem</a></span><span class="op">(</span><span class="va">myiter</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] 21 22 23 24 25 26 27 28 29 30</code></pre>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Encore ?</span>
<span class="fu">iterators</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/iterators/man/nextElem.html">nextElem</a></span><span class="op">(</span><span class="va">myiter</span><span class="op">)</span></code></pre></div>
<pre><code>## Error: StopIteration</code></pre>
</div>
<div id="les-autres-plans-de-calculs-parallèle" class="section level3" number="6.3.2">
<h3>
<span class="header-section-number">6.3.2</span> Les autres “plans” de calculs parallèle<a class="anchor" aria-label="anchor" href="#les-autres-plans-de-calculs-parall%C3%A8le"><i class="fas fa-link"></i></a>
</h3>
<p>Pour exécuter votre code (exactement le même code, c’est un des avantages
du packages de la famille <code>future*</code>), vous devez régler un “plan” de calculs :</p>
<ul>
<li><p>sur un ordinateur (ou un unique serveur de calcul) sous Unix (Linux, Mac OS),
vous pouvez utiliser <code>plan(multicore(workers = XX))</code> qui est souvent plus
performant. Le plan multisession fonctionne toujours.</p></li>
<li><p>sur un cluster de calculs (type Avakas à Bordeaux), nous renvoyons au package
<a href="https://cran.r-project.org/web/packages/future.batchtools/vignettes/future.batchtools.html"><code>future.batchtools</code></a></p></li>
</ul>
</div>
</div>
<div id="parallélisation-dans-notre-exemple-fil-rouge" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Parallélisation dans notre exemple fil rouge<a class="anchor" aria-label="anchor" href="#parall%C3%A9lisation-dans-notre-exemple-fil-rouge"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p><strong><em>À vous de jouer !</em></strong></p>
<ol style="list-style-type: decimal">
<li><p>À partir de la fonction <code>mvnpdfoptim()</code> et/ou <code>mvnpdfsmart()</code>, proposez
une implémentation parallélisant les calculs sur les observations (colonnes de <span class="math inline">\(x\)</span>)</p></li>
<li><p>Comparez les temps de calcul sur 10 000 observations</p></li>
</ol>
</blockquote>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/multisession.html">multisession</a></span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10000</span>
<span class="va">mb</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span><span class="op">(</span>
  <span class="fu">mvtnorm</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mvtnorm/man/Mvnorm.html">dmvnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1.96</span>, nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu">mypkgr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mypkgr/man/mvnpdf.html">mvnpdfoptim</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1.96</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="va">n</span><span class="op">)</span>, Log<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>,
  <span class="fu">mypkgr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mypkgr/man/mvnpdf.html">mvnpdfoptim_par</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1.96</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="va">n</span><span class="op">)</span>, Log<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>,
  <span class="fu">mypkgr</span><span class="fu">::</span><span class="fu">mvnpdfoptim_parIter</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1.96</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="va">n</span><span class="op">)</span>, Log<span class="op">=</span><span class="cn">FALSE</span>, ncores <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,
  times<span class="op">=</span><span class="fl">20L</span><span class="op">)</span>
<span class="va">mb</span></code></pre></div>
<pre><code>## Unit: microseconds
##                                                                                             expr
##                                               mvtnorm::dmvnorm(matrix(1.96, nrow = n, ncol = 2))
##                           mypkgr::mvnpdfoptim(x = matrix(1.96, nrow = 2, ncol = n), Log = FALSE)
##                  mypkgr::mvnpdfoptim_par(x = matrix(1.96, nrow = 2, ncol = n),      Log = FALSE)
##  mypkgr::mvnpdfoptim_parIter(x = matrix(1.96, nrow = 2, ncol = n),      Log = FALSE, ncores = 3)
##        min         lq       mean     median         uq       max neval cld
##    300.519   344.0155   362.6347   352.9305   392.7385    447.60    20  a 
##  24144.586 27844.8270 29340.4425 28354.5550 29700.8440  37591.64    20  ab
##  21117.246 24406.5590 25520.3099 25217.5930 26919.3365  28695.41    20  ab
##  20026.677 22529.1105 40802.1316 25208.0950 26377.1595 349567.61    20   b</code></pre>
<div class="inline-figure"><img src="AdvancedRcourse_dev_perf_files/figure-html/unnamed-chunk-45-1.png" width="672"></div>
</div>
<div id="conclusion" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"><i class="fas fa-link"></i></a>
</h2>
<p>La parallélisation permet de gagner du temps, mais il faut d’abord bien
optimiser son code. Quand on parallélise un code, le gain sur la durée
d’exécution dépend avant tout du ratio entre le temps de communication et le
temps de calcul effectif pour chaque tache.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="rcpp-ou-comment-int%C3%A9grer-facilement-du-code-cdans-un-package.html"><span class="header-section-number">5</span> Rcpp ou comment intégrer facilement du code C++dans un package </a></div>
<div class="next"><a href="misc%C3%A9lan%C3%A9es.html"><span class="header-section-number">7</span> Miscélanées</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#parall%C3%A9lisation-du-code"><span class="header-section-number">6</span> Parallélisation du code </a></li>
<li><a class="nav-link" href="#introduction-%C3%A0-lexecution-parall%C3%A8le-sous"><span class="header-section-number">6.1</span> Introduction à l’execution parallèle sous </a></li>
<li><a class="nav-link" href="#premi%C3%A8re-fonction-parall%C3%A8le-en"><span class="header-section-number">6.2</span> Première fonction parallèle en </a></li>
<li>
<a class="nav-link" href="#parall%C3%A9lisation-efficace"><span class="header-section-number">6.3</span> Parallélisation efficace</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#les-it%C3%A9rateurs"><span class="header-section-number">6.3.1</span> Les itérateurs</a></li>
<li><a class="nav-link" href="#les-autres-plans-de-calculs-parall%C3%A8le"><span class="header-section-number">6.3.2</span> Les autres “plans” de calculs parallèle</a></li>
</ul>
</li>
<li><a class="nav-link" href="#parall%C3%A9lisation-dans-notre-exemple-fil-rouge"><span class="header-section-number">6.4</span> Parallélisation dans notre exemple fil rouge</a></li>
<li><a class="nav-link" href="#conclusion"><span class="header-section-number">6.5</span> Conclusion</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced <svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> course</strong>: <em>Tools for software development and performance</em>" was written by <a href="https://robin.genuer.fr/">Robin Genuer</a> &amp; <a href="https://borishejblum.science/">Boris Hejblum</a>. It was last built on 2022-06-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
